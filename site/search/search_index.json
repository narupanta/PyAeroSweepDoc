{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to PyAeroSweep About Repository PyAeroSweep is a multi-functional tool that performs aerodynamic sweeps of airfoils and wings using high-fidelity CFD methods. PyAeroSweep can perform a range of pre-processing and simulation tasks: Generation of airfoil and wing geometries of various kinds: Airfoils Airfoils can be generated using PARSEC of CST parametrization methods A droop nose, plain, or slotted flaps can be defined for given airfoils Airfoil coordinates are imported in typical text formats Wings Generation of piesewise wing planforms using the Pygeo framework Wing planforms are exported in the .igs format Only clean planform capabilities are available Automatic geometry meshing using Pointwise: Meshing is performed using pre-defined templates that can be parameterically tuned for a particular problem Viscous layers are added for unstructured meshes using TREX Airfoils Structured and unstructured mesh options available Meshing of externally imported airfils is possible Wings Meshes the wing surface using the Pointwise automatic mesh generation method CFD solution using SU2: At the moment, can only run RANS solutions. Euler solutions are planned 3D solutions for wings are currently available only with a symmetry plane angle-of-attack, altitude, and Mach number sweeps are possible The tool can run a similar mesh created externally","title":"Home"},{"location":"#welcome-to-pyaerosweep","text":"","title":"Welcome to PyAeroSweep"},{"location":"#about","text":"Repository PyAeroSweep is a multi-functional tool that performs aerodynamic sweeps of airfoils and wings using high-fidelity CFD methods. PyAeroSweep can perform a range of pre-processing and simulation tasks: Generation of airfoil and wing geometries of various kinds: Airfoils Airfoils can be generated using PARSEC of CST parametrization methods A droop nose, plain, or slotted flaps can be defined for given airfoils Airfoil coordinates are imported in typical text formats Wings Generation of piesewise wing planforms using the Pygeo framework Wing planforms are exported in the .igs format Only clean planform capabilities are available Automatic geometry meshing using Pointwise: Meshing is performed using pre-defined templates that can be parameterically tuned for a particular problem Viscous layers are added for unstructured meshes using TREX Airfoils Structured and unstructured mesh options available Meshing of externally imported airfils is possible Wings Meshes the wing surface using the Pointwise automatic mesh generation method CFD solution using SU2: At the moment, can only run RANS solutions. Euler solutions are planned 3D solutions for wings are currently available only with a symmetry plane angle-of-attack, altitude, and Mach number sweeps are possible The tool can run a similar mesh created externally","title":"About"},{"location":"installation/","text":"Prerequisites The following set of tools must be installed to enable all capabilities: Pointwise V18.6+ https://www.pointwise.com/ SU2 v7.0+ https://su2code.github.io/ pygeo https://mdolab-pygeo.readthedocs-hosted.com/en/latest/?badge=latest preFoil https://mdolab-prefoil.readthedocs-hosted.com/en/latest/ OpenMPI https://www.open-mpi.org/ Installation Clone the Repository or download repository to the folder of your choice","title":"Installation"},{"location":"installation/#prerequisites","text":"The following set of tools must be installed to enable all capabilities: Pointwise V18.6+ https://www.pointwise.com/ SU2 v7.0+ https://su2code.github.io/ pygeo https://mdolab-pygeo.readthedocs-hosted.com/en/latest/?badge=latest preFoil https://mdolab-prefoil.readthedocs-hosted.com/en/latest/ OpenMPI https://www.open-mpi.org/","title":"Prerequisites"},{"location":"installation/#installation","text":"Clone the Repository or download repository to the folder of your choice","title":"Installation"},{"location":"other/","text":"Others Turbulence Model The information of turbulence models used in this project can be found under these 2 links SST Model SA Model Wall functions Available for RANS, INC_RANS. The wall function model of Nichols and Nelson (2004) has been implemented in the compressible and the incompressible solver, for the SA as well as the SST models. For the compressible solver, the wall function model takes into account the frictional heating of the wall according to the Crocco-Busemann relation when the wall boundary conditions is not isothermal. When the wall model is active, the value of the dimensional distance of the first node from the wall can be y^+ > 5 . When the wall model is not active, y^+ < 5 and in addition a fine mesh is necessary close to the wall to resolve the near wall boundary layer.","title":"Others"},{"location":"other/#others","text":"","title":"Others"},{"location":"other/#turbulence-model","text":"The information of turbulence models used in this project can be found under these 2 links SST Model SA Model","title":"Turbulence Model"},{"location":"other/#wall-functions","text":"Available for RANS, INC_RANS. The wall function model of Nichols and Nelson (2004) has been implemented in the compressible and the incompressible solver, for the SA as well as the SST models. For the compressible solver, the wall function model takes into account the frictional heating of the wall according to the Crocco-Busemann relation when the wall boundary conditions is not isothermal. When the wall model is active, the value of the dimensional distance of the first node from the wall can be y^+ > 5 . When the wall model is not active, y^+ < 5 and in addition a fine mesh is necessary close to the wall to resolve the near wall boundary layer.","title":"Wall functions"},{"location":"structure/","text":"Code Structure Input_Data.py In this file, we can setup the simulation by inputting various kinds of variables such as: working_dir which will be changed according to the user's workspace Solver Settings working_dir = r\"/home/doktorand/Software/PyAeroSweep-Stan-V3/PyAeroSweep/\" Solver_settings = Solver() Solver_settings.working_dir = working_dir Solver_settings.name = 'SU2' # SU2 or Fluent # Solver dimensions # 2d or 3d for SU2 Solver_settings.dimensions = '2d' # Only available for SU2 in 3D # defines half od the shape or a full shape analysis (Only symmetric works for now) Solver_settings.symmetric = True # SST or SA for SU2 Solver_settings.turbulence_model = 'SST' # Number of processors Solver_settings.processors = 1 # Cauchy convergence criteria # Could be either LIFT or DRAG Solver_settings.monitor = \"LIFT\" Solver_settings.tolerance = 5e-7 Solver_settings.max_iterations = 100 Solver_settings.save_frequency = 100 # Warm start # YES or NO Solver_settings.warmstart = 'YES' # SU2 reference config file name which will be updated Solver_settings.config_file = 'Run_airfoil_template.cfg' Freestream Settings The following code block is the setup of Freestream. The air speed (in Mach), altitude (meters) and angle of attack (degrees) can be set as following. Freestream = Data() Freestream.Mach = np.array([0.21,0.25]) Freestream.Altitude = np.array([0,2000]) # in meters Freestream.Angle_of_attack = np.array([0.0,3.0,5.0]) # in degrees Geometry Settings Geometry_data = Geometry() # Geometry to analyze ''' Could be airfoil or wing Airfoils can be parametrically defined using the PARSEC methods Wings are defined only using the existing CAD file and work either for straight tapered wings with or without the kink''' Geometry_data.type = 'airfoil' # Reference values Geometry_data.reference_values = { \"Area\" : 2.62, \"Length\" : 2.62, \"Depth\" : 1, \"Point\" : [0.25*2.62,0,0] # reference point about which the moment is taken } # Flag to use PARSEC parametrization or to use already existing airfoils Geometry_data.PARSEC = True # Airfoil files are used either to write PARSEC-generated airfoil and then read by Pointwise or to read directly from them Geometry_data.airfoil_files = { \"upper\" : \"main_airfoil_upper.dat\", \"lower\" : \"main_airfoil_lower.dat\" } segment = Segment() segment.tag = 'section_1' segment.spanwise_location = 0 segment.chord = 7.760 segment.incidence = 2 segment.dihedral = 3 segment.leading_edge_sweep = 30 segment.Airfoil.files = { \"upper\" : \"main_airfoil_upper_1.dat\", \"lower\" : \"main_airfoil_lower_1.dat\" } segment.Airfoil.PARSEC = { \"rle\" : 0.0084, # Main airfoil LE radius \"x_pre\" : 0.458080577545180, # x-location of the crest on the pressure side \"y_pre\" : -0.04553160030118, # y-location of the crest on the pressure side \"d2ydx2_pre\" : 0.554845554794938, # curvature of the crest on the pressure side \"th_pre\" : -9.649803736, # trailing edge angle on the pressure side [deg] \"x_suc\" : 0.46036604, # x-location of the crest on the suction side \"y_suc\" : 0.06302395539, # y-location of the crest on the suction side \"d2ydx2_suc\" : -0.361421420, # curvature of the crest on the suction side \"th_suc\" : -12.391677695858 # trailing edge angle on the suction side [deg] } Geometry_data.Segments.append(segment) Mesh Settings Mesh_data = Mesh() # Flag to mesh the shape or not Mesh_data.meshing = True # Mesh type Mesh_data.structured = True # Defined the OS in which Pointwise is used # WINDOWS or Linux Mesh_data.operating_system = 'Linux' # Pointwise tclsh directory used in Windows Mesh_data.tclsh_directory = r\"/home/doktorand/Fidelity/Pointwise/Pointwise2022.1\" # Desired Y+ value Mesh_data.Yplus = 1.0 # Define the Glyph template to use for meshing Mesh_data.glyph_file = \"mesh_clean_airfoil_SU2.glf\" # Mesh filename for either the newly generated mesh or an eisting mesh Mesh_data.filename = 'su2meshEx.su2' # Define far-field Mesh_data.far_field = 100 * Geometry_data.reference_values[\"Length\"] Mesh_data.airfoil_mesh_settings = { \"LE_spacing\" : 0.001, # Airfoil leading edge spacing \"TE_spacing\" : 0.0005, # Airfoil trailing edge spacing \"flap_cluster\" : 0.005, \"connector dimensions\" : [200, 200, 8], # \"connector_dimensions\": [200, 120, 150, 150, 70, 25, 8, 8], \"number of normal cells\" : 230 } Packing all the inputs Input = Data() Input.Solver = Solver_settings Input.Freestream = Freestream Input.Geometry = Geometry_data Input.Mesh = Mesh_data Summary Code Example At the end, the function Input_data() is defined as import os import subprocess import numpy as np from Core.Data import Data from Components.Solver import Solver from Components.Geometry import Geometry from Components.Geometry.Wing.Segment import Segment from Components.Mesh import Mesh from Run_aerodynamic_analysis import run_aerodynamic_analysis def Input_data(): working_dir = r\"/home/doktorand/Software/PyAeroSweep-Stan-V3/PyAeroSweep/\" # ------------------------------- SOLVER SETTINGS ----------------------------------------------------------- # # Solver_settings = Solver() Solver_settings.working_dir = working_dir Solver_settings.name = 'SU2' # SU2 or Fluent # Solver dimensions # 2d or 3d for SU2 Solver_settings.dimensions = '2d' # Only available for SU2 in 3D # defines half od the shape or a full shape analysis (Only symmetric works for now) Solver_settings.symmetric = True # SST or SA for SU2 Solver_settings.turbulence_model = 'SST' # Number of processors Solver_settings.processors = 1 # Cauchy convergence criteria # Could be either LIFT or DRAG Solver_settings.monitor = \"LIFT\" Solver_settings.tolerance = 5e-7 Solver_settings.max_iterations = 100 Solver_settings.save_frequency = 100 # Warm start # YES or NO Solver_settings.warmstart = 'YES' # SU2 reference config file name which will be updated Solver_settings.config_file = 'Run_airfoil_template.cfg' # ------------------------------- FREESTREAM SETTINGS ------------------------------------------------------- # # Freestream = Data() Freestream.Mach = np.array([0.21,0.25]) Freestream.Altitude = np.array([0,2000]) # in meters Freestream.Angle_of_attack = np.array([0.0,3.0,5.0]) # in degrees # ------------------------------- GEOMETRY SETTINGS --------------------------------------------------------- # # Geometry_data = Geometry() # Geometry to analyze ''' Could be airfoil or wing Airfoils can be parametrically defined using the PARSEC methods Wings are defined only using the existing CAD file and work either for straight tapered wings with or without the kink''' Geometry_data.type = 'airfoil' # Reference values Geometry_data.reference_values = { \"Area\" : 2.62, \"Length\" : 2.62, \"Depth\" : 1, \"Point\" : [0.25*2.62,0,0] # reference point about which the moment is taken } # Flag to use PARSEC parametrization or to use already existing airfoils Geometry_data.PARSEC = True # Airfoil files are used either to write PARSEC-generated airfoil and then read by Pointwise or to read directly from them Geometry_data.airfoil_files = { \"upper\" : \"main_airfoil_upper.dat\", \"lower\" : \"main_airfoil_lower.dat\" } segment = Segment() segment.tag = 'section_1' segment.spanwise_location = 0 segment.chord = 7.760 segment.incidence = 2 segment.dihedral = 3 segment.leading_edge_sweep = 30 segment.Airfoil.files = { \"upper\" : \"main_airfoil_upper_1.dat\", \"lower\" : \"main_airfoil_lower_1.dat\" } segment.Airfoil.PARSEC = { \"rle\" : 0.0084, # Main airfoil LE radius \"x_pre\" : 0.458080577545180, # x-location of the crest on the pressure side \"y_pre\" : -0.04553160030118, # y-location of the crest on the pressure side \"d2ydx2_pre\" : 0.554845554794938, # curvature of the crest on the pressure side \"th_pre\" : -9.649803736, # trailing edge angle on the pressure side [deg] \"x_suc\" : 0.46036604, # x-location of the crest on the suction side \"y_suc\" : 0.06302395539, # y-location of the crest on the suction side \"d2ydx2_suc\" : -0.361421420, # curvature of the crest on the suction side \"th_suc\" : -12.391677695858 # trailing edge angle on the suction side [deg] } Geometry_data.Segments.append(segment) # ------------------------------- MESH SETTINGS ---------------------------------------------------------------- # # Mesh_data = Mesh() # Flag to mesh the shape or not Mesh_data.meshing = True # Mesh type Mesh_data.structured = True # Defined the OS in which Pointwise is used # WINDOWS or Linux Mesh_data.operating_system = 'Linux' # Pointwise tclsh directory used in Windows Mesh_data.tclsh_directory = r\"/home/doktorand/Fidelity/Pointwise/Pointwise2022.1\" # Desired Y+ value Mesh_data.Yplus = 1.0 # Define the Glyph template to use for meshing Mesh_data.glyph_file = \"mesh_clean_airfoil_SU2.glf\" # Mesh filename for either the newly generated mesh or an eisting mesh Mesh_data.filename = 'su2meshEx.su2' # Define far-field Mesh_data.far_field = 100 * Geometry_data.reference_values[\"Length\"] Mesh_data.airfoil_mesh_settings = { \"LE_spacing\" : 0.001, # Airfoil leading edge spacing \"TE_spacing\" : 0.0005, # Airfoil trailing edge spacing \"flap_cluster\" : 0.005, \"connector dimensions\" : [200, 200, 8], # \"connector_dimensions\": [200, 120, 150, 150, 70, 25, 8, 8], \"number of normal cells\" : 230 } # ----------------------------------------------------------------------------------------------------------------------------- # # # Pack all inputs Input = Data() Input.Solver = Solver_settings Input.Freestream = Freestream Input.Geometry = Geometry_data Input.Mesh = Mesh_data return Input After finishing running the function Input_data() , function aerodynamic_analysis(Input) will be executed using Input_data() as its input to perform the simulation.","title":"Code Structure"},{"location":"structure/#code-structure","text":"","title":"Code Structure"},{"location":"structure/#input_datapy","text":"In this file, we can setup the simulation by inputting various kinds of variables such as: working_dir which will be changed according to the user's workspace","title":"Input_Data.py"},{"location":"structure/#solver-settings","text":"working_dir = r\"/home/doktorand/Software/PyAeroSweep-Stan-V3/PyAeroSweep/\" Solver_settings = Solver() Solver_settings.working_dir = working_dir Solver_settings.name = 'SU2' # SU2 or Fluent # Solver dimensions # 2d or 3d for SU2 Solver_settings.dimensions = '2d' # Only available for SU2 in 3D # defines half od the shape or a full shape analysis (Only symmetric works for now) Solver_settings.symmetric = True # SST or SA for SU2 Solver_settings.turbulence_model = 'SST' # Number of processors Solver_settings.processors = 1 # Cauchy convergence criteria # Could be either LIFT or DRAG Solver_settings.monitor = \"LIFT\" Solver_settings.tolerance = 5e-7 Solver_settings.max_iterations = 100 Solver_settings.save_frequency = 100 # Warm start # YES or NO Solver_settings.warmstart = 'YES' # SU2 reference config file name which will be updated Solver_settings.config_file = 'Run_airfoil_template.cfg'","title":"Solver Settings"},{"location":"structure/#freestream-settings","text":"The following code block is the setup of Freestream. The air speed (in Mach), altitude (meters) and angle of attack (degrees) can be set as following. Freestream = Data() Freestream.Mach = np.array([0.21,0.25]) Freestream.Altitude = np.array([0,2000]) # in meters Freestream.Angle_of_attack = np.array([0.0,3.0,5.0]) # in degrees","title":"Freestream Settings"},{"location":"structure/#geometry-settings","text":"Geometry_data = Geometry() # Geometry to analyze ''' Could be airfoil or wing Airfoils can be parametrically defined using the PARSEC methods Wings are defined only using the existing CAD file and work either for straight tapered wings with or without the kink''' Geometry_data.type = 'airfoil' # Reference values Geometry_data.reference_values = { \"Area\" : 2.62, \"Length\" : 2.62, \"Depth\" : 1, \"Point\" : [0.25*2.62,0,0] # reference point about which the moment is taken } # Flag to use PARSEC parametrization or to use already existing airfoils Geometry_data.PARSEC = True # Airfoil files are used either to write PARSEC-generated airfoil and then read by Pointwise or to read directly from them Geometry_data.airfoil_files = { \"upper\" : \"main_airfoil_upper.dat\", \"lower\" : \"main_airfoil_lower.dat\" } segment = Segment() segment.tag = 'section_1' segment.spanwise_location = 0 segment.chord = 7.760 segment.incidence = 2 segment.dihedral = 3 segment.leading_edge_sweep = 30 segment.Airfoil.files = { \"upper\" : \"main_airfoil_upper_1.dat\", \"lower\" : \"main_airfoil_lower_1.dat\" } segment.Airfoil.PARSEC = { \"rle\" : 0.0084, # Main airfoil LE radius \"x_pre\" : 0.458080577545180, # x-location of the crest on the pressure side \"y_pre\" : -0.04553160030118, # y-location of the crest on the pressure side \"d2ydx2_pre\" : 0.554845554794938, # curvature of the crest on the pressure side \"th_pre\" : -9.649803736, # trailing edge angle on the pressure side [deg] \"x_suc\" : 0.46036604, # x-location of the crest on the suction side \"y_suc\" : 0.06302395539, # y-location of the crest on the suction side \"d2ydx2_suc\" : -0.361421420, # curvature of the crest on the suction side \"th_suc\" : -12.391677695858 # trailing edge angle on the suction side [deg] } Geometry_data.Segments.append(segment)","title":"Geometry Settings"},{"location":"structure/#mesh-settings","text":"Mesh_data = Mesh() # Flag to mesh the shape or not Mesh_data.meshing = True # Mesh type Mesh_data.structured = True # Defined the OS in which Pointwise is used # WINDOWS or Linux Mesh_data.operating_system = 'Linux' # Pointwise tclsh directory used in Windows Mesh_data.tclsh_directory = r\"/home/doktorand/Fidelity/Pointwise/Pointwise2022.1\" # Desired Y+ value Mesh_data.Yplus = 1.0 # Define the Glyph template to use for meshing Mesh_data.glyph_file = \"mesh_clean_airfoil_SU2.glf\" # Mesh filename for either the newly generated mesh or an eisting mesh Mesh_data.filename = 'su2meshEx.su2' # Define far-field Mesh_data.far_field = 100 * Geometry_data.reference_values[\"Length\"] Mesh_data.airfoil_mesh_settings = { \"LE_spacing\" : 0.001, # Airfoil leading edge spacing \"TE_spacing\" : 0.0005, # Airfoil trailing edge spacing \"flap_cluster\" : 0.005, \"connector dimensions\" : [200, 200, 8], # \"connector_dimensions\": [200, 120, 150, 150, 70, 25, 8, 8], \"number of normal cells\" : 230 }","title":"Mesh Settings"},{"location":"structure/#packing-all-the-inputs","text":"Input = Data() Input.Solver = Solver_settings Input.Freestream = Freestream Input.Geometry = Geometry_data Input.Mesh = Mesh_data","title":"Packing all the inputs"},{"location":"structure/#summary-code-example","text":"At the end, the function Input_data() is defined as import os import subprocess import numpy as np from Core.Data import Data from Components.Solver import Solver from Components.Geometry import Geometry from Components.Geometry.Wing.Segment import Segment from Components.Mesh import Mesh from Run_aerodynamic_analysis import run_aerodynamic_analysis def Input_data(): working_dir = r\"/home/doktorand/Software/PyAeroSweep-Stan-V3/PyAeroSweep/\" # ------------------------------- SOLVER SETTINGS ----------------------------------------------------------- # # Solver_settings = Solver() Solver_settings.working_dir = working_dir Solver_settings.name = 'SU2' # SU2 or Fluent # Solver dimensions # 2d or 3d for SU2 Solver_settings.dimensions = '2d' # Only available for SU2 in 3D # defines half od the shape or a full shape analysis (Only symmetric works for now) Solver_settings.symmetric = True # SST or SA for SU2 Solver_settings.turbulence_model = 'SST' # Number of processors Solver_settings.processors = 1 # Cauchy convergence criteria # Could be either LIFT or DRAG Solver_settings.monitor = \"LIFT\" Solver_settings.tolerance = 5e-7 Solver_settings.max_iterations = 100 Solver_settings.save_frequency = 100 # Warm start # YES or NO Solver_settings.warmstart = 'YES' # SU2 reference config file name which will be updated Solver_settings.config_file = 'Run_airfoil_template.cfg' # ------------------------------- FREESTREAM SETTINGS ------------------------------------------------------- # # Freestream = Data() Freestream.Mach = np.array([0.21,0.25]) Freestream.Altitude = np.array([0,2000]) # in meters Freestream.Angle_of_attack = np.array([0.0,3.0,5.0]) # in degrees # ------------------------------- GEOMETRY SETTINGS --------------------------------------------------------- # # Geometry_data = Geometry() # Geometry to analyze ''' Could be airfoil or wing Airfoils can be parametrically defined using the PARSEC methods Wings are defined only using the existing CAD file and work either for straight tapered wings with or without the kink''' Geometry_data.type = 'airfoil' # Reference values Geometry_data.reference_values = { \"Area\" : 2.62, \"Length\" : 2.62, \"Depth\" : 1, \"Point\" : [0.25*2.62,0,0] # reference point about which the moment is taken } # Flag to use PARSEC parametrization or to use already existing airfoils Geometry_data.PARSEC = True # Airfoil files are used either to write PARSEC-generated airfoil and then read by Pointwise or to read directly from them Geometry_data.airfoil_files = { \"upper\" : \"main_airfoil_upper.dat\", \"lower\" : \"main_airfoil_lower.dat\" } segment = Segment() segment.tag = 'section_1' segment.spanwise_location = 0 segment.chord = 7.760 segment.incidence = 2 segment.dihedral = 3 segment.leading_edge_sweep = 30 segment.Airfoil.files = { \"upper\" : \"main_airfoil_upper_1.dat\", \"lower\" : \"main_airfoil_lower_1.dat\" } segment.Airfoil.PARSEC = { \"rle\" : 0.0084, # Main airfoil LE radius \"x_pre\" : 0.458080577545180, # x-location of the crest on the pressure side \"y_pre\" : -0.04553160030118, # y-location of the crest on the pressure side \"d2ydx2_pre\" : 0.554845554794938, # curvature of the crest on the pressure side \"th_pre\" : -9.649803736, # trailing edge angle on the pressure side [deg] \"x_suc\" : 0.46036604, # x-location of the crest on the suction side \"y_suc\" : 0.06302395539, # y-location of the crest on the suction side \"d2ydx2_suc\" : -0.361421420, # curvature of the crest on the suction side \"th_suc\" : -12.391677695858 # trailing edge angle on the suction side [deg] } Geometry_data.Segments.append(segment) # ------------------------------- MESH SETTINGS ---------------------------------------------------------------- # # Mesh_data = Mesh() # Flag to mesh the shape or not Mesh_data.meshing = True # Mesh type Mesh_data.structured = True # Defined the OS in which Pointwise is used # WINDOWS or Linux Mesh_data.operating_system = 'Linux' # Pointwise tclsh directory used in Windows Mesh_data.tclsh_directory = r\"/home/doktorand/Fidelity/Pointwise/Pointwise2022.1\" # Desired Y+ value Mesh_data.Yplus = 1.0 # Define the Glyph template to use for meshing Mesh_data.glyph_file = \"mesh_clean_airfoil_SU2.glf\" # Mesh filename for either the newly generated mesh or an eisting mesh Mesh_data.filename = 'su2meshEx.su2' # Define far-field Mesh_data.far_field = 100 * Geometry_data.reference_values[\"Length\"] Mesh_data.airfoil_mesh_settings = { \"LE_spacing\" : 0.001, # Airfoil leading edge spacing \"TE_spacing\" : 0.0005, # Airfoil trailing edge spacing \"flap_cluster\" : 0.005, \"connector dimensions\" : [200, 200, 8], # \"connector_dimensions\": [200, 120, 150, 150, 70, 25, 8, 8], \"number of normal cells\" : 230 } # ----------------------------------------------------------------------------------------------------------------------------- # # # Pack all inputs Input = Data() Input.Solver = Solver_settings Input.Freestream = Freestream Input.Geometry = Geometry_data Input.Mesh = Mesh_data return Input After finishing running the function Input_data() , function aerodynamic_analysis(Input) will be executed using Input_data() as its input to perform the simulation.","title":"Summary Code Example"},{"location":"usage/","text":"Usage Quickstart To test the code and ensure that all cababilities are available, run cases located in the Test_Cases directory. To run the case: Use any IDE environment (for example, Visual Studio Code) Allocate the working directory to the main one, where all software folders and the file Run_aerodynamic_analysis.py are allocated. Open the file Input_data.py in the test case file of your interest and update all common directory variables (working directory, Pointwise execution file directory, etc). Run the file","title":"Usage"},{"location":"usage/#usage","text":"","title":"Usage"},{"location":"usage/#quickstart","text":"To test the code and ensure that all cababilities are available, run cases located in the Test_Cases directory. To run the case: Use any IDE environment (for example, Visual Studio Code) Allocate the working directory to the main one, where all software folders and the file Run_aerodynamic_analysis.py are allocated. Open the file Input_data.py in the test case file of your interest and update all common directory variables (working directory, Pointwise execution file directory, etc). Run the file","title":"Quickstart"},{"location":"structure/Input_Data/","text":"Input_Data.py In this file, we can setup the simulation by inputting various kinds of variables such as: working_dir which will be changed according to the user's workspace Solver Settings working_dir = r\"/home/doktorand/Software/PyAeroSweep-Stan-V3/PyAeroSweep/\" Solver_settings = Solver() Solver_settings.working_dir = working_dir Solver_settings.name = 'SU2' # SU2 or Fluent # Solver dimensions # 2d or 3d for SU2 Solver_settings.dimensions = '2d' # Only available for SU2 in 3D # defines half od the shape or a full shape analysis (Only symmetric works for now) Solver_settings.symmetric = True # SST or SA for SU2 Solver_settings.turbulence_model = 'SST' # Number of processors Solver_settings.processors = 1 # Cauchy convergence criteria # Could be either LIFT or DRAG Solver_settings.monitor = \"LIFT\" Solver_settings.tolerance = 5e-7 Solver_settings.max_iterations = 100 Solver_settings.save_frequency = 100 # Warm start # YES or NO Solver_settings.warmstart = 'YES' # SU2 reference config file name which will be updated Solver_settings.config_file = 'Run_airfoil_template.cfg' Freestream Settings The following code block is the setup of Freestream. The air speed (in Mach), altitude (meters) and angle of attack (degrees) can be set as following. In file run_SU2.py, there will be a loop for every possible cases regarding the Freestream Settings Freestream = Data() Freestream.Mach = np.array([0.21,0.25]) Freestream.Altitude = np.array([0,2000]) # in meters Freestream.Angle_of_attack = np.array([0.0,3.0,5.0]) # in degrees Geometry Settings In this section, we can define the geometry of the airfoil. For 2D case, PARSEC and CST can be used to define the airfoil geometry's and we can also add the definition of trailing edge and leading edge device into the geometry. For 3D case, pygeo will be used to generate the airfoil geometry. Futher information about defining airfoil geometry can be found in these links: CST PARSEC Code Example Geometry_data = Geometry() # Geometry to analyze ''' Could be airfoil or wing Airfoils can be parametrically defined using the PARSEC methods Wings are defined only using the existing CAD file and work either for straight tapered wings with or without the kink''' Geometry_data.type = 'airfoil' # Reference values Geometry_data.reference_values = { \"Area\" : 2.62, \"Length\" : 2.62, \"Depth\" : 1, \"Point\" : [0.25*2.62,0,0] # reference point about which the moment is taken } # Flag to use PARSEC parametrization or to use already existing airfoils Geometry_data.PARSEC = True # Airfoil files are used either to write PARSEC-generated airfoil and then read by Pointwise or to read directly from them Geometry_data.airfoil_files = { \"upper\" : \"main_airfoil_upper.dat\", \"lower\" : \"main_airfoil_lower.dat\" } segment = Segment() segment.tag = 'section_1' segment.spanwise_location = 0 segment.chord = 7.760 segment.incidence = 2 segment.dihedral = 3 segment.leading_edge_sweep = 30 segment.Airfoil.files = { \"upper\" : \"main_airfoil_upper_1.dat\", \"lower\" : \"main_airfoil_lower_1.dat\" } segment.Airfoil.PARSEC = { \"rle\" : 0.0084, # Main airfoil LE radius \"x_pre\" : 0.458080577545180, # x-location of the crest on the pressure side \"y_pre\" : -0.04553160030118, # y-location of the crest on the pressure side \"d2ydx2_pre\" : 0.554845554794938, # curvature of the crest on the pressure side \"th_pre\" : -9.649803736, # trailing edge angle on the pressure side [deg] \"x_suc\" : 0.46036604, # x-location of the crest on the suction side \"y_suc\" : 0.06302395539, # y-location of the crest on the suction side \"d2ydx2_suc\" : -0.361421420, # curvature of the crest on the suction side \"th_suc\" : -12.391677695858 # trailing edge angle on the suction side [deg] } Geometry_data.Segments.append(segment) Mesh Settings Mesh_data = Mesh() # Flag to mesh the shape or not Mesh_data.meshing = True # Mesh type Mesh_data.structured = True # Defined the OS in which Pointwise is used # WINDOWS or Linux Mesh_data.operating_system = 'Linux' # Pointwise tclsh directory used in Windows Mesh_data.tclsh_directory = r\"/home/doktorand/Fidelity/Pointwise/Pointwise2022.1\" # Desired Y+ value Mesh_data.Yplus = 1.0 # Define the Glyph template to use for meshing Mesh_data.glyph_file = \"mesh_clean_airfoil_SU2.glf\" # Mesh filename for either the newly generated mesh or an eisting mesh Mesh_data.filename = 'su2meshEx.su2' # Define far-field Mesh_data.far_field = 100 * Geometry_data.reference_values[\"Length\"] Mesh_data.airfoil_mesh_settings = { \"LE_spacing\" : 0.001, # Airfoil leading edge spacing \"TE_spacing\" : 0.0005, # Airfoil trailing edge spacing \"flap_cluster\" : 0.005, \"connector dimensions\" : [200, 200, 8], # \"connector_dimensions\": [200, 120, 150, 150, 70, 25, 8, 8], \"number of normal cells\" : 230 } Packing all the inputs Input = Data() Input.Solver = Solver_settings Input.Freestream = Freestream Input.Geometry = Geometry_data Input.Mesh = Mesh_data Summary Code Example At the end, the function Input_data() is defined as import os import subprocess import numpy as np from Core.Data import Data from Components.Solver import Solver from Components.Geometry import Geometry from Components.Geometry.Wing.Segment import Segment from Components.Mesh import Mesh from Run_aerodynamic_analysis import run_aerodynamic_analysis def Input_data(): working_dir = r\"/home/doktorand/Software/PyAeroSweep-Stan-V3/PyAeroSweep/\" # ------------------------------- SOLVER SETTINGS ----------------------------------------------------------- # # Solver_settings = Solver() Solver_settings.working_dir = working_dir Solver_settings.name = 'SU2' # SU2 or Fluent # Solver dimensions # 2d or 3d for SU2 Solver_settings.dimensions = '2d' # Only available for SU2 in 3D # defines half od the shape or a full shape analysis (Only symmetric works for now) Solver_settings.symmetric = True # SST or SA for SU2 Solver_settings.turbulence_model = 'SST' # Number of processors Solver_settings.processors = 1 # Cauchy convergence criteria # Could be either LIFT or DRAG Solver_settings.monitor = \"LIFT\" Solver_settings.tolerance = 5e-7 Solver_settings.max_iterations = 100 Solver_settings.save_frequency = 100 # Warm start # YES or NO Solver_settings.warmstart = 'YES' # SU2 reference config file name which will be updated Solver_settings.config_file = 'Run_airfoil_template.cfg' # ------------------------------- FREESTREAM SETTINGS ------------------------------------------------------- # # Freestream = Data() Freestream.Mach = np.array([0.21,0.25]) Freestream.Altitude = np.array([0,2000]) # in meters Freestream.Angle_of_attack = np.array([0.0,3.0,5.0]) # in degrees # ------------------------------- GEOMETRY SETTINGS --------------------------------------------------------- # # Geometry_data = Geometry() # Geometry to analyze ''' Could be airfoil or wing Airfoils can be parametrically defined using the PARSEC methods Wings are defined only using the existing CAD file and work either for straight tapered wings with or without the kink''' Geometry_data.type = 'airfoil' # Reference values Geometry_data.reference_values = { \"Area\" : 2.62, \"Length\" : 2.62, \"Depth\" : 1, \"Point\" : [0.25*2.62,0,0] # reference point about which the moment is taken } # Flag to use PARSEC parametrization or to use already existing airfoils Geometry_data.PARSEC = True # Airfoil files are used either to write PARSEC-generated airfoil and then read by Pointwise or to read directly from them Geometry_data.airfoil_files = { \"upper\" : \"main_airfoil_upper.dat\", \"lower\" : \"main_airfoil_lower.dat\" } segment = Segment() segment.tag = 'section_1' segment.spanwise_location = 0 segment.chord = 7.760 segment.incidence = 2 segment.dihedral = 3 segment.leading_edge_sweep = 30 segment.Airfoil.files = { \"upper\" : \"main_airfoil_upper_1.dat\", \"lower\" : \"main_airfoil_lower_1.dat\" } segment.Airfoil.PARSEC = { \"rle\" : 0.0084, # Main airfoil LE radius \"x_pre\" : 0.458080577545180, # x-location of the crest on the pressure side \"y_pre\" : -0.04553160030118, # y-location of the crest on the pressure side \"d2ydx2_pre\" : 0.554845554794938, # curvature of the crest on the pressure side \"th_pre\" : -9.649803736, # trailing edge angle on the pressure side [deg] \"x_suc\" : 0.46036604, # x-location of the crest on the suction side \"y_suc\" : 0.06302395539, # y-location of the crest on the suction side \"d2ydx2_suc\" : -0.361421420, # curvature of the crest on the suction side \"th_suc\" : -12.391677695858 # trailing edge angle on the suction side [deg] } Geometry_data.Segments.append(segment) # ------------------------------- MESH SETTINGS ---------------------------------------------------------------- # # Mesh_data = Mesh() # Flag to mesh the shape or not Mesh_data.meshing = True # Mesh type Mesh_data.structured = True # Defined the OS in which Pointwise is used # WINDOWS or Linux Mesh_data.operating_system = 'Linux' # Pointwise tclsh directory used in Windows Mesh_data.tclsh_directory = r\"/home/doktorand/Fidelity/Pointwise/Pointwise2022.1\" # Desired Y+ value Mesh_data.Yplus = 1.0 # Define the Glyph template to use for meshing Mesh_data.glyph_file = \"mesh_clean_airfoil_SU2.glf\" # Mesh filename for either the newly generated mesh or an eisting mesh Mesh_data.filename = 'su2meshEx.su2' # Define far-field Mesh_data.far_field = 100 * Geometry_data.reference_values[\"Length\"] Mesh_data.airfoil_mesh_settings = { \"LE_spacing\" : 0.001, # Airfoil leading edge spacing \"TE_spacing\" : 0.0005, # Airfoil trailing edge spacing \"flap_cluster\" : 0.005, \"connector dimensions\" : [200, 200, 8], # \"connector_dimensions\": [200, 120, 150, 150, 70, 25, 8, 8], \"number of normal cells\" : 230 } # ----------------------------------------------------------------------------------------------------------------------------- # # # Pack all inputs Input = Data() Input.Solver = Solver_settings Input.Freestream = Freestream Input.Geometry = Geometry_data Input.Mesh = Mesh_data return Input After finishing running the function Input_data() , function aerodynamic_analysis(Input) will be executed using Input_data() as its input to perform the simulation.","title":"Input_Data.py"},{"location":"structure/Input_Data/#input_datapy","text":"In this file, we can setup the simulation by inputting various kinds of variables such as: working_dir which will be changed according to the user's workspace","title":"Input_Data.py"},{"location":"structure/Input_Data/#solver-settings","text":"working_dir = r\"/home/doktorand/Software/PyAeroSweep-Stan-V3/PyAeroSweep/\" Solver_settings = Solver() Solver_settings.working_dir = working_dir Solver_settings.name = 'SU2' # SU2 or Fluent # Solver dimensions # 2d or 3d for SU2 Solver_settings.dimensions = '2d' # Only available for SU2 in 3D # defines half od the shape or a full shape analysis (Only symmetric works for now) Solver_settings.symmetric = True # SST or SA for SU2 Solver_settings.turbulence_model = 'SST' # Number of processors Solver_settings.processors = 1 # Cauchy convergence criteria # Could be either LIFT or DRAG Solver_settings.monitor = \"LIFT\" Solver_settings.tolerance = 5e-7 Solver_settings.max_iterations = 100 Solver_settings.save_frequency = 100 # Warm start # YES or NO Solver_settings.warmstart = 'YES' # SU2 reference config file name which will be updated Solver_settings.config_file = 'Run_airfoil_template.cfg'","title":"Solver Settings"},{"location":"structure/Input_Data/#freestream-settings","text":"The following code block is the setup of Freestream. The air speed (in Mach), altitude (meters) and angle of attack (degrees) can be set as following. In file run_SU2.py, there will be a loop for every possible cases regarding the Freestream Settings Freestream = Data() Freestream.Mach = np.array([0.21,0.25]) Freestream.Altitude = np.array([0,2000]) # in meters Freestream.Angle_of_attack = np.array([0.0,3.0,5.0]) # in degrees","title":"Freestream Settings"},{"location":"structure/Input_Data/#geometry-settings","text":"In this section, we can define the geometry of the airfoil. For 2D case, PARSEC and CST can be used to define the airfoil geometry's and we can also add the definition of trailing edge and leading edge device into the geometry. For 3D case, pygeo will be used to generate the airfoil geometry. Futher information about defining airfoil geometry can be found in these links: CST PARSEC Code Example Geometry_data = Geometry() # Geometry to analyze ''' Could be airfoil or wing Airfoils can be parametrically defined using the PARSEC methods Wings are defined only using the existing CAD file and work either for straight tapered wings with or without the kink''' Geometry_data.type = 'airfoil' # Reference values Geometry_data.reference_values = { \"Area\" : 2.62, \"Length\" : 2.62, \"Depth\" : 1, \"Point\" : [0.25*2.62,0,0] # reference point about which the moment is taken } # Flag to use PARSEC parametrization or to use already existing airfoils Geometry_data.PARSEC = True # Airfoil files are used either to write PARSEC-generated airfoil and then read by Pointwise or to read directly from them Geometry_data.airfoil_files = { \"upper\" : \"main_airfoil_upper.dat\", \"lower\" : \"main_airfoil_lower.dat\" } segment = Segment() segment.tag = 'section_1' segment.spanwise_location = 0 segment.chord = 7.760 segment.incidence = 2 segment.dihedral = 3 segment.leading_edge_sweep = 30 segment.Airfoil.files = { \"upper\" : \"main_airfoil_upper_1.dat\", \"lower\" : \"main_airfoil_lower_1.dat\" } segment.Airfoil.PARSEC = { \"rle\" : 0.0084, # Main airfoil LE radius \"x_pre\" : 0.458080577545180, # x-location of the crest on the pressure side \"y_pre\" : -0.04553160030118, # y-location of the crest on the pressure side \"d2ydx2_pre\" : 0.554845554794938, # curvature of the crest on the pressure side \"th_pre\" : -9.649803736, # trailing edge angle on the pressure side [deg] \"x_suc\" : 0.46036604, # x-location of the crest on the suction side \"y_suc\" : 0.06302395539, # y-location of the crest on the suction side \"d2ydx2_suc\" : -0.361421420, # curvature of the crest on the suction side \"th_suc\" : -12.391677695858 # trailing edge angle on the suction side [deg] } Geometry_data.Segments.append(segment)","title":"Geometry Settings"},{"location":"structure/Input_Data/#mesh-settings","text":"Mesh_data = Mesh() # Flag to mesh the shape or not Mesh_data.meshing = True # Mesh type Mesh_data.structured = True # Defined the OS in which Pointwise is used # WINDOWS or Linux Mesh_data.operating_system = 'Linux' # Pointwise tclsh directory used in Windows Mesh_data.tclsh_directory = r\"/home/doktorand/Fidelity/Pointwise/Pointwise2022.1\" # Desired Y+ value Mesh_data.Yplus = 1.0 # Define the Glyph template to use for meshing Mesh_data.glyph_file = \"mesh_clean_airfoil_SU2.glf\" # Mesh filename for either the newly generated mesh or an eisting mesh Mesh_data.filename = 'su2meshEx.su2' # Define far-field Mesh_data.far_field = 100 * Geometry_data.reference_values[\"Length\"] Mesh_data.airfoil_mesh_settings = { \"LE_spacing\" : 0.001, # Airfoil leading edge spacing \"TE_spacing\" : 0.0005, # Airfoil trailing edge spacing \"flap_cluster\" : 0.005, \"connector dimensions\" : [200, 200, 8], # \"connector_dimensions\": [200, 120, 150, 150, 70, 25, 8, 8], \"number of normal cells\" : 230 }","title":"Mesh Settings"},{"location":"structure/Input_Data/#packing-all-the-inputs","text":"Input = Data() Input.Solver = Solver_settings Input.Freestream = Freestream Input.Geometry = Geometry_data Input.Mesh = Mesh_data","title":"Packing all the inputs"},{"location":"structure/Input_Data/#summary-code-example","text":"At the end, the function Input_data() is defined as import os import subprocess import numpy as np from Core.Data import Data from Components.Solver import Solver from Components.Geometry import Geometry from Components.Geometry.Wing.Segment import Segment from Components.Mesh import Mesh from Run_aerodynamic_analysis import run_aerodynamic_analysis def Input_data(): working_dir = r\"/home/doktorand/Software/PyAeroSweep-Stan-V3/PyAeroSweep/\" # ------------------------------- SOLVER SETTINGS ----------------------------------------------------------- # # Solver_settings = Solver() Solver_settings.working_dir = working_dir Solver_settings.name = 'SU2' # SU2 or Fluent # Solver dimensions # 2d or 3d for SU2 Solver_settings.dimensions = '2d' # Only available for SU2 in 3D # defines half od the shape or a full shape analysis (Only symmetric works for now) Solver_settings.symmetric = True # SST or SA for SU2 Solver_settings.turbulence_model = 'SST' # Number of processors Solver_settings.processors = 1 # Cauchy convergence criteria # Could be either LIFT or DRAG Solver_settings.monitor = \"LIFT\" Solver_settings.tolerance = 5e-7 Solver_settings.max_iterations = 100 Solver_settings.save_frequency = 100 # Warm start # YES or NO Solver_settings.warmstart = 'YES' # SU2 reference config file name which will be updated Solver_settings.config_file = 'Run_airfoil_template.cfg' # ------------------------------- FREESTREAM SETTINGS ------------------------------------------------------- # # Freestream = Data() Freestream.Mach = np.array([0.21,0.25]) Freestream.Altitude = np.array([0,2000]) # in meters Freestream.Angle_of_attack = np.array([0.0,3.0,5.0]) # in degrees # ------------------------------- GEOMETRY SETTINGS --------------------------------------------------------- # # Geometry_data = Geometry() # Geometry to analyze ''' Could be airfoil or wing Airfoils can be parametrically defined using the PARSEC methods Wings are defined only using the existing CAD file and work either for straight tapered wings with or without the kink''' Geometry_data.type = 'airfoil' # Reference values Geometry_data.reference_values = { \"Area\" : 2.62, \"Length\" : 2.62, \"Depth\" : 1, \"Point\" : [0.25*2.62,0,0] # reference point about which the moment is taken } # Flag to use PARSEC parametrization or to use already existing airfoils Geometry_data.PARSEC = True # Airfoil files are used either to write PARSEC-generated airfoil and then read by Pointwise or to read directly from them Geometry_data.airfoil_files = { \"upper\" : \"main_airfoil_upper.dat\", \"lower\" : \"main_airfoil_lower.dat\" } segment = Segment() segment.tag = 'section_1' segment.spanwise_location = 0 segment.chord = 7.760 segment.incidence = 2 segment.dihedral = 3 segment.leading_edge_sweep = 30 segment.Airfoil.files = { \"upper\" : \"main_airfoil_upper_1.dat\", \"lower\" : \"main_airfoil_lower_1.dat\" } segment.Airfoil.PARSEC = { \"rle\" : 0.0084, # Main airfoil LE radius \"x_pre\" : 0.458080577545180, # x-location of the crest on the pressure side \"y_pre\" : -0.04553160030118, # y-location of the crest on the pressure side \"d2ydx2_pre\" : 0.554845554794938, # curvature of the crest on the pressure side \"th_pre\" : -9.649803736, # trailing edge angle on the pressure side [deg] \"x_suc\" : 0.46036604, # x-location of the crest on the suction side \"y_suc\" : 0.06302395539, # y-location of the crest on the suction side \"d2ydx2_suc\" : -0.361421420, # curvature of the crest on the suction side \"th_suc\" : -12.391677695858 # trailing edge angle on the suction side [deg] } Geometry_data.Segments.append(segment) # ------------------------------- MESH SETTINGS ---------------------------------------------------------------- # # Mesh_data = Mesh() # Flag to mesh the shape or not Mesh_data.meshing = True # Mesh type Mesh_data.structured = True # Defined the OS in which Pointwise is used # WINDOWS or Linux Mesh_data.operating_system = 'Linux' # Pointwise tclsh directory used in Windows Mesh_data.tclsh_directory = r\"/home/doktorand/Fidelity/Pointwise/Pointwise2022.1\" # Desired Y+ value Mesh_data.Yplus = 1.0 # Define the Glyph template to use for meshing Mesh_data.glyph_file = \"mesh_clean_airfoil_SU2.glf\" # Mesh filename for either the newly generated mesh or an eisting mesh Mesh_data.filename = 'su2meshEx.su2' # Define far-field Mesh_data.far_field = 100 * Geometry_data.reference_values[\"Length\"] Mesh_data.airfoil_mesh_settings = { \"LE_spacing\" : 0.001, # Airfoil leading edge spacing \"TE_spacing\" : 0.0005, # Airfoil trailing edge spacing \"flap_cluster\" : 0.005, \"connector dimensions\" : [200, 200, 8], # \"connector_dimensions\": [200, 120, 150, 150, 70, 25, 8, 8], \"number of normal cells\" : 230 } # ----------------------------------------------------------------------------------------------------------------------------- # # # Pack all inputs Input = Data() Input.Solver = Solver_settings Input.Freestream = Freestream Input.Geometry = Geometry_data Input.Mesh = Mesh_data return Input After finishing running the function Input_data() , function aerodynamic_analysis(Input) will be executed using Input_data() as its input to perform the simulation.","title":"Summary Code Example"},{"location":"structure/Run_aero/","text":"run_aerodynamic_analysis(Input) Steps: Unpack all inputs Run the airfoil generation script in a separate directory (using pygeo if 3d case, else parsec or cst) Generate Mesh or use existing mesh Solve using SU2 run_SU2.py solve() Steps: For each combination of altitudes, angles of attack and mach in freestream setting, firstly check the warmstart condition and retrieve filename using run_SU2_config function Create directory of the results Run the solver parallelly using MPI, results will be written in SU2_output.log Read results and store it in excel Code Example of run_aerodynamic_analysis import os import shutil import subprocess import numpy as np from Methods.Mesh.mesh_pre_process_2D import mesh_pre_process_2D from Methods.Mesh.mesh_pre_process_3D import WingMeshPreProcess from Methods.Solver import run_SU2 def run_aerodynamic_analysis(Input): '''Main function to run the analysis Inputs: Input.Solver - Solver settings Geometry - Geometric settings Freestream - Freestream conditions Mesh - Mesh settings Outputs: Assumptions: ''' # Unpack all inputs Solver = Input.Solver Geometry = Input.Geometry Freestream = Input.Freestream Mesh = Input.Mesh # Run the airfoil/wing generation script in a separate directory if Geometry.generate is True: file_path = os.path.join(Solver.working_dir, 'Geometry_files/') if os.path.exists(file_path): shutil.rmtree(file_path) os.mkdir(file_path) os.chdir(file_path) num_segm = len(Geometry.Segments.keys()) for i in range(num_segm): if len(Geometry.Segments[i].Airfoil.PARSEC) != 0: Geometry.Segments[i].create_PARSEC_airfoil() elif len(Geometry.Segments[i].Airfoil.CST) != 0: Geometry.Segments[i].create_CST_airfoil() # Create a wing using pygeo if a 3D case is defined if Solver.dimensions == '3d': Geometry.create_wing_geometry() # Mesh the geometry if Mesh.meshing is True: # Calculate mesh step size based on Y+ Mesh.calculate_initstepsize(max(Freestream.Mach), min(Freestream.Altitude), Geometry.reference_values[\"Length\"], Mesh.Yplus) # Assign a flag for an inviscid solver if Solver.turbulence_model == 'Inviscid': Inviscid_flag = True else: Inviscid_flag = False # Update the Glyph script depending on the geometry if Solver.dimensions == '2d': mesh_pre_process_2D(Solver.working_dir,Geometry,Mesh) if Geometry.Segments[0].TrailingEdgeDevice.type == 'Slotted': # Update the Glyph script - Slotted flap airfoil from Methods.Mesh.glyph_updater_flapped import update_glyph_script_fl update_glyph_script_fl(Mesh,Solver.working_dir) else: # Update the Glyph script - clean Airfoil or one with a plain flap from Methods.Mesh.glyph_updater_clean import update_glyph_script_cl update_glyph_script_cl(Mesh,Solver.working_dir) elif Solver.dimensions == '3d': wing_meshing = WingMeshPreProcess() wing_meshing.write_glyph_file(Solver.working_dir,Geometry,Mesh,Solver,Inviscid_flag) else: print(\"Specify 2d or 3d solver dimensions\") # Run Pointwise glyph script to generate the mesh os.chdir(Mesh.tclsh_directory) if Mesh.operating_system == \"WINDOWS\": working_dir_change = Solver.working_dir.replace('/','\\\\') full_glyph_path = working_dir_change + \"\\\\\" + Mesh.glyph_file p = subprocess.call(['tclsh ',full_glyph_path], stderr= None, stdin=subprocess.PIPE) else: full_glyph_path = Solver.working_dir + \"/\" + Mesh.glyph_file p = subprocess.call('./pointwise ' + '-b ' + full_glyph_path, shell = True, stdin=subprocess.PIPE) # Run CFD solution run_SU2.solve(Solver,Freestream,Mesh,Geometry) print(\"Analysis completed\") return","title":"Run_aerodynamic_analysis.py"},{"location":"structure/Run_aero/#run_aerodynamic_analysisinput","text":"Steps: Unpack all inputs Run the airfoil generation script in a separate directory (using pygeo if 3d case, else parsec or cst) Generate Mesh or use existing mesh Solve using SU2","title":"run_aerodynamic_analysis(Input)"},{"location":"structure/Run_aero/#run_su2py","text":"","title":"run_SU2.py"},{"location":"structure/Run_aero/#solve","text":"Steps: For each combination of altitudes, angles of attack and mach in freestream setting, firstly check the warmstart condition and retrieve filename using run_SU2_config function Create directory of the results Run the solver parallelly using MPI, results will be written in SU2_output.log Read results and store it in excel Code Example of run_aerodynamic_analysis import os import shutil import subprocess import numpy as np from Methods.Mesh.mesh_pre_process_2D import mesh_pre_process_2D from Methods.Mesh.mesh_pre_process_3D import WingMeshPreProcess from Methods.Solver import run_SU2 def run_aerodynamic_analysis(Input): '''Main function to run the analysis Inputs: Input.Solver - Solver settings Geometry - Geometric settings Freestream - Freestream conditions Mesh - Mesh settings Outputs: Assumptions: ''' # Unpack all inputs Solver = Input.Solver Geometry = Input.Geometry Freestream = Input.Freestream Mesh = Input.Mesh # Run the airfoil/wing generation script in a separate directory if Geometry.generate is True: file_path = os.path.join(Solver.working_dir, 'Geometry_files/') if os.path.exists(file_path): shutil.rmtree(file_path) os.mkdir(file_path) os.chdir(file_path) num_segm = len(Geometry.Segments.keys()) for i in range(num_segm): if len(Geometry.Segments[i].Airfoil.PARSEC) != 0: Geometry.Segments[i].create_PARSEC_airfoil() elif len(Geometry.Segments[i].Airfoil.CST) != 0: Geometry.Segments[i].create_CST_airfoil() # Create a wing using pygeo if a 3D case is defined if Solver.dimensions == '3d': Geometry.create_wing_geometry() # Mesh the geometry if Mesh.meshing is True: # Calculate mesh step size based on Y+ Mesh.calculate_initstepsize(max(Freestream.Mach), min(Freestream.Altitude), Geometry.reference_values[\"Length\"], Mesh.Yplus) # Assign a flag for an inviscid solver if Solver.turbulence_model == 'Inviscid': Inviscid_flag = True else: Inviscid_flag = False # Update the Glyph script depending on the geometry if Solver.dimensions == '2d': mesh_pre_process_2D(Solver.working_dir,Geometry,Mesh) if Geometry.Segments[0].TrailingEdgeDevice.type == 'Slotted': # Update the Glyph script - Slotted flap airfoil from Methods.Mesh.glyph_updater_flapped import update_glyph_script_fl update_glyph_script_fl(Mesh,Solver.working_dir) else: # Update the Glyph script - clean Airfoil or one with a plain flap from Methods.Mesh.glyph_updater_clean import update_glyph_script_cl update_glyph_script_cl(Mesh,Solver.working_dir) elif Solver.dimensions == '3d': wing_meshing = WingMeshPreProcess() wing_meshing.write_glyph_file(Solver.working_dir,Geometry,Mesh,Solver,Inviscid_flag) else: print(\"Specify 2d or 3d solver dimensions\") # Run Pointwise glyph script to generate the mesh os.chdir(Mesh.tclsh_directory) if Mesh.operating_system == \"WINDOWS\": working_dir_change = Solver.working_dir.replace('/','\\\\') full_glyph_path = working_dir_change + \"\\\\\" + Mesh.glyph_file p = subprocess.call(['tclsh ',full_glyph_path], stderr= None, stdin=subprocess.PIPE) else: full_glyph_path = Solver.working_dir + \"/\" + Mesh.glyph_file p = subprocess.call('./pointwise ' + '-b ' + full_glyph_path, shell = True, stdin=subprocess.PIPE) # Run CFD solution run_SU2.solve(Solver,Freestream,Mesh,Geometry) print(\"Analysis completed\") return","title":"solve()"},{"location":"structure/Geometry/CST_Definition/","text":"CST Definition Variable Decscription upper upper surface CST coefficients (specify dvNum to define how many) lower lower surface CST coefficients (specify dvNum to define how many) N1 first class shape parameter for both upper and lower surfaces (adds a single DV) N2 second class shape parameter for both upper and lower surfaces (adds a single DV) N1_upper first class shape parameters for upper surface (adds a single DV) N1_lower first class shape parameters for lower surface (adds a single DV) N2_upper second class shape parameters for upper surface (adds a single DV) N2_lower second class shape parameters for lower surface (adds a single DV) chord chord length in whatever units the point set length is defined and scaled to keep the leading edge at the same position (adds a single DV) Geometry_data = Geometry() # Geometry to analyze ''' Could be airfoil or wing Airfoils can be parametrically defined using the PARSEC methods Wings are defined only using the existing CAD file and work either for straight tapered wings with or without the kink''' Geometry_data.type = 'airfoil' # Reference values Geometry_data.reference_values = { \"Area\" : 2.62, \"Length\" : 2.62, \"Depth\" : 1, \"Point\" : [0.25*2.62,0,0] # reference point about which the moment is taken } segment = Segment() segment.tag = 'section_1' segment.chord = 2.62 segment.Airfoil.files = { \"upper\" : \"main_airfoil_upper_1.dat\", \"lower\" : \"main_airfoil_lower_1.dat\" } segment.Airfoil.CST = { \"upper\" :[0.20095, 0.26864, 0.10933, 0.29307,\\ 0.12099, 0.21197, 0.18002, 0.18408], \"lower\" :[-0.20095, 0.05433, -0.46373, 0.25546,\\ -0.40375, 0.01032, -0.14109, -0.11217], \"N1 upper\" : 0.5, \"N1 lower\" : 0.5, \"N2 upper\" : 1.0, \"N2 lower\" : 1.0, \"yte upper\" : 0.001, \"yte lower\" : -0.001 } Geometry_data.Segments.append(segment) segment.plot_airfoil = True","title":"CST"},{"location":"structure/Geometry/CST_Definition/#cst-definition","text":"Variable Decscription upper upper surface CST coefficients (specify dvNum to define how many) lower lower surface CST coefficients (specify dvNum to define how many) N1 first class shape parameter for both upper and lower surfaces (adds a single DV) N2 second class shape parameter for both upper and lower surfaces (adds a single DV) N1_upper first class shape parameters for upper surface (adds a single DV) N1_lower first class shape parameters for lower surface (adds a single DV) N2_upper second class shape parameters for upper surface (adds a single DV) N2_lower second class shape parameters for lower surface (adds a single DV) chord chord length in whatever units the point set length is defined and scaled to keep the leading edge at the same position (adds a single DV) Geometry_data = Geometry() # Geometry to analyze ''' Could be airfoil or wing Airfoils can be parametrically defined using the PARSEC methods Wings are defined only using the existing CAD file and work either for straight tapered wings with or without the kink''' Geometry_data.type = 'airfoil' # Reference values Geometry_data.reference_values = { \"Area\" : 2.62, \"Length\" : 2.62, \"Depth\" : 1, \"Point\" : [0.25*2.62,0,0] # reference point about which the moment is taken } segment = Segment() segment.tag = 'section_1' segment.chord = 2.62 segment.Airfoil.files = { \"upper\" : \"main_airfoil_upper_1.dat\", \"lower\" : \"main_airfoil_lower_1.dat\" } segment.Airfoil.CST = { \"upper\" :[0.20095, 0.26864, 0.10933, 0.29307,\\ 0.12099, 0.21197, 0.18002, 0.18408], \"lower\" :[-0.20095, 0.05433, -0.46373, 0.25546,\\ -0.40375, 0.01032, -0.14109, -0.11217], \"N1 upper\" : 0.5, \"N1 lower\" : 0.5, \"N2 upper\" : 1.0, \"N2 lower\" : 1.0, \"yte upper\" : 0.001, \"yte lower\" : -0.001 } Geometry_data.Segments.append(segment) segment.plot_airfoil = True","title":"CST Definition"},{"location":"structure/Geometry/PARSEC_Definition/","text":"PARSEC Definition The following image explain the meaning of the parameters using to define the PARSEC airfoil. To compare the variables [picture to be revised] Description Symbol(Picture) Variable (Code) Leading Edge Radius R_{LE} rle Upper Crest Abscissa X_{UP} x_suc Upper Crest Ordinate Z_{UP} y_suc Upper Crest Curvature Z_{XXUP} d2ydx2_suc Lower Crest Abscissa X_{LO} x_pre Lower Crest Ordinate Z_{LO} y_pre Lower Crest Curvature Z_{XXLO} d2ydx2_pre Trailing Edge Ordinate Z_{TE} ( yte upper + yte lower )/2 Trailing Edge Thickness \u0394Z_{TE} yte upper - yte lower Trailing Edge Direction \u03b1_{TE} th_suc Trailing Edge Wedge Angle \u03b2_{TE} th_suc + th_pre Geometry_data = Geometry() # Geometry to analyze ''' Could be airfoil or wing Airfoils can be parametrically defined using the PARSEC methods Wings are defined only using the existing CAD file and work either for straight tapered wings with or without the kink''' Geometry_data.type = 'airfoil' # Reference values Geometry_data.reference_values = { \"Area\" : 2.62, \"Length\" : 2.62, \"Depth\" : 1, \"Point\" : [0.25*2.62,0,0] # reference point about which the moment is taken } segment = Segment() segment.tag = 'section_1' segment.spanwise_location = 0 segment.chord = 2.62 segment.Airfoil.files = { \"upper\" : \"main_airfoil_upper_1.dat\", \"lower\" : \"main_airfoil_lower_1.dat\" } segment.Airfoil.PARSEC = { \"rle\" : 0.0084, # Main airfoil LE radius \"x_pre\" : 0.458080577545180, # x-location of the crest on the pressure side \"y_pre\" : -0.04553160030118, # y-location of the crest on the pressure side \"d2ydx2_pre\" : 0.554845554794938, # curvature of the crest on the pressure side \"th_pre\" : -9.649803736, # trailing edge angle on the pressure side [deg] \"x_suc\" : 0.46036604, # x-location of the crest on the suction side \"y_suc\" : 0.06302395539, # y-location of the crest on the suction side \"d2ydx2_suc\" : -0.361421420, # curvature of the crest on the suction side \"th_suc\" : -12.391677695858, # trailing edge angle on the suction side [deg] \"yte upper\" : 0.002, \"yte lower\" : -0.002 } Geometry_data.Segments.append(segment) segment.plot_airfoil = True","title":"PARSEC"},{"location":"structure/Geometry/PARSEC_Definition/#parsec-definition","text":"The following image explain the meaning of the parameters using to define the PARSEC airfoil. To compare the variables [picture to be revised] Description Symbol(Picture) Variable (Code) Leading Edge Radius R_{LE} rle Upper Crest Abscissa X_{UP} x_suc Upper Crest Ordinate Z_{UP} y_suc Upper Crest Curvature Z_{XXUP} d2ydx2_suc Lower Crest Abscissa X_{LO} x_pre Lower Crest Ordinate Z_{LO} y_pre Lower Crest Curvature Z_{XXLO} d2ydx2_pre Trailing Edge Ordinate Z_{TE} ( yte upper + yte lower )/2 Trailing Edge Thickness \u0394Z_{TE} yte upper - yte lower Trailing Edge Direction \u03b1_{TE} th_suc Trailing Edge Wedge Angle \u03b2_{TE} th_suc + th_pre Geometry_data = Geometry() # Geometry to analyze ''' Could be airfoil or wing Airfoils can be parametrically defined using the PARSEC methods Wings are defined only using the existing CAD file and work either for straight tapered wings with or without the kink''' Geometry_data.type = 'airfoil' # Reference values Geometry_data.reference_values = { \"Area\" : 2.62, \"Length\" : 2.62, \"Depth\" : 1, \"Point\" : [0.25*2.62,0,0] # reference point about which the moment is taken } segment = Segment() segment.tag = 'section_1' segment.spanwise_location = 0 segment.chord = 2.62 segment.Airfoil.files = { \"upper\" : \"main_airfoil_upper_1.dat\", \"lower\" : \"main_airfoil_lower_1.dat\" } segment.Airfoil.PARSEC = { \"rle\" : 0.0084, # Main airfoil LE radius \"x_pre\" : 0.458080577545180, # x-location of the crest on the pressure side \"y_pre\" : -0.04553160030118, # y-location of the crest on the pressure side \"d2ydx2_pre\" : 0.554845554794938, # curvature of the crest on the pressure side \"th_pre\" : -9.649803736, # trailing edge angle on the pressure side [deg] \"x_suc\" : 0.46036604, # x-location of the crest on the suction side \"y_suc\" : 0.06302395539, # y-location of the crest on the suction side \"d2ydx2_suc\" : -0.361421420, # curvature of the crest on the suction side \"th_suc\" : -12.391677695858, # trailing edge angle on the suction side [deg] \"yte upper\" : 0.002, \"yte lower\" : -0.002 } Geometry_data.Segments.append(segment) segment.plot_airfoil = True","title":"PARSEC Definition"},{"location":"testcases/Clean_airfoil_CST/","text":"Clean Airfoil CST Clean Airfoil CST test case is the simulation of the air flow through the clean airfoil (without flaps, just airfoil). CST (Class-Shape Transformation) is one way to define the geometry of the airfoil. For futher information follow this link CST Airfoil Geometry Steps: Setting the input for the simulation The geometry is defined using CST In function run_aerodynamic_analysis , Generate the file for geometry and mesh the geometry Solve using SU2 Read results from the runtime log and save them as csv and vtu Visualize the result using Paraview Inputs import numpy as np from Core.Data import Data from Components.Solver import Solver from Components.Geometry import Geometry from Components.Geometry.Wing.Segment import Segment from Components.Mesh import Mesh from Run_aerodynamic_analysis import run_aerodynamic_analysis def Input_data(): working_dir = r\"/home/doktorand/Software/PyAeroSweep-Stan-V3/PyAeroSweep/Test_Cases/Clean_airfoil_CST\" # ------------------------------- SOLVER SETTINGS ----------------------------------------------------------- # # Solver_settings = Solver() Solver_settings.working_dir = working_dir Solver_settings.name = 'SU2' # SU2 or Fluent # Solver dimensions # 2d or 3d for SU2 Solver_settings.dimensions = '2d' # Only available for SU2 in 3D # defines half od the shape or a full shape analysis (Only symmetric works for now) Solver_settings.symmetric = True # SST or SA for SU2 Solver_settings.turbulence_model = 'SST' # Number of processors Solver_settings.processors = 4 # Cauchy convergence criteria # Could be either LIFT or DRAG Solver_settings.monitor = \"LIFT\" Solver_settings.tolerance = 5e-7 Solver_settings.max_iterations = 100 Solver_settings.save_frequency = 100 # Warm start # YES or NO Solver_settings.warmstart = 'YES' # SU2 reference config file name which will be updated Solver_settings.config_file = 'Run_airfoil_template.cfg' # ------------------------------- FREESTREAM SETTINGS ------------------------------------------------------- # # Freestream = Data() Freestream.Mach = np.array([0.21,0.25]) Freestream.Altitude = np.array([0,2000]) # in meters Freestream.Angle_of_attack = np.array([0.0,3.0,5.0]) # in degrees # ------------------------------- GEOMETRY SETTINGS --------------------------------------------------------- # # Geometry_data = Geometry() # Geometry to analyze ''' Could be airfoil or wing Airfoils can be parametrically defined using the PARSEC methods Wings are defined only using the existing CAD file and work either for straight tapered wings with or without the kink''' Geometry_data.type = 'airfoil' # Reference values Geometry_data.reference_values = { \"Area\" : 2.62, \"Length\" : 2.62, \"Depth\" : 1, \"Point\" : [0.25*2.62,0,0] # reference point about which the moment is taken } segment = Segment() segment.tag = 'section_1' segment.chord = 2.62 segment.Airfoil.files = { \"upper\" : \"main_airfoil_upper_1.dat\", \"lower\" : \"main_airfoil_lower_1.dat\" } segment.Airfoil.CST = { \"upper\" :[0.20095, 0.26864, 0.10933, 0.29307,\\ 0.12099, 0.21197, 0.18002, 0.18408], \"lower\" :[-0.20095, 0.05433, -0.46373, 0.25546,\\ -0.40375, 0.01032, -0.14109, -0.11217], \"N1 upper\" : 0.5, \"N1 lower\" : 0.5, \"N2 upper\" : 1.0, \"N2 lower\" : 1.0, \"yte upper\" : 0.001, \"yte lower\" : -0.001 } Geometry_data.Segments.append(segment) segment.plot_airfoil = True # ------------------------------- MESH SETTINGS ---------------------------------------------------------------- # # Mesh_data = Mesh() # Flag to mesh the shape or not Mesh_data.meshing = True # Mesh type Mesh_data.structured = True # Defined the OS in which Pointwise is used # WINDOWS or Linux Mesh_data.operating_system = 'Linux' # Pointwise tclsh directory used in Windows Mesh_data.tclsh_directory = r\"/home/doktorand/Fidelity/Pointwise/Pointwise2022.1\" # Desired Y+ value Mesh_data.Yplus = 1.0 # Define the Glyph template to use for meshing Mesh_data.glyph_file = \"mesh_clean_airfoil_SU2.glf\" # Mesh filename for either the newly generated mesh or an eisting mesh Mesh_data.filename = 'su2meshEx.su2' # Define far-field Mesh_data.far_field = 100 * Geometry_data.reference_values[\"Length\"] Mesh_data.airfoil_mesh_settings = { \"LE_spacing\" : 0.001, # Airfoil leading edge spacing \"TE_spacing\" : 0.0005, # Airfoil trailing edge spacing \"flap_cluster\" : 0.005, \"connector dimensions\" : [200, 200, 8], # \"connector_dimensions\": [200, 120, 150, 150, 70, 25, 8, 8], \"number of normal cells\" : 230 } # ----------------------------------------------------------------------------------------------------------------------------- # # # Pack all inputs Input = Data() Input.Solver = Solver_settings Input.Freestream = Freestream Input.Geometry = Geometry_data Input.Mesh = Mesh_data return Input if __name__ == '__main__': Input = Input_data() run_aerodynamic_analysis(Input) Results The magnitude of momentum at altitude 2000 m, speed = 0.25 Mach and angle of attack 3 degree.","title":"Clean_airfoil_CST"},{"location":"testcases/Clean_airfoil_CST/#clean-airfoil-cst","text":"Clean Airfoil CST test case is the simulation of the air flow through the clean airfoil (without flaps, just airfoil). CST (Class-Shape Transformation) is one way to define the geometry of the airfoil. For futher information follow this link CST Airfoil Geometry Steps: Setting the input for the simulation The geometry is defined using CST In function run_aerodynamic_analysis , Generate the file for geometry and mesh the geometry Solve using SU2 Read results from the runtime log and save them as csv and vtu Visualize the result using Paraview","title":"Clean Airfoil CST"},{"location":"testcases/Clean_airfoil_CST/#inputs","text":"import numpy as np from Core.Data import Data from Components.Solver import Solver from Components.Geometry import Geometry from Components.Geometry.Wing.Segment import Segment from Components.Mesh import Mesh from Run_aerodynamic_analysis import run_aerodynamic_analysis def Input_data(): working_dir = r\"/home/doktorand/Software/PyAeroSweep-Stan-V3/PyAeroSweep/Test_Cases/Clean_airfoil_CST\" # ------------------------------- SOLVER SETTINGS ----------------------------------------------------------- # # Solver_settings = Solver() Solver_settings.working_dir = working_dir Solver_settings.name = 'SU2' # SU2 or Fluent # Solver dimensions # 2d or 3d for SU2 Solver_settings.dimensions = '2d' # Only available for SU2 in 3D # defines half od the shape or a full shape analysis (Only symmetric works for now) Solver_settings.symmetric = True # SST or SA for SU2 Solver_settings.turbulence_model = 'SST' # Number of processors Solver_settings.processors = 4 # Cauchy convergence criteria # Could be either LIFT or DRAG Solver_settings.monitor = \"LIFT\" Solver_settings.tolerance = 5e-7 Solver_settings.max_iterations = 100 Solver_settings.save_frequency = 100 # Warm start # YES or NO Solver_settings.warmstart = 'YES' # SU2 reference config file name which will be updated Solver_settings.config_file = 'Run_airfoil_template.cfg' # ------------------------------- FREESTREAM SETTINGS ------------------------------------------------------- # # Freestream = Data() Freestream.Mach = np.array([0.21,0.25]) Freestream.Altitude = np.array([0,2000]) # in meters Freestream.Angle_of_attack = np.array([0.0,3.0,5.0]) # in degrees # ------------------------------- GEOMETRY SETTINGS --------------------------------------------------------- # # Geometry_data = Geometry() # Geometry to analyze ''' Could be airfoil or wing Airfoils can be parametrically defined using the PARSEC methods Wings are defined only using the existing CAD file and work either for straight tapered wings with or without the kink''' Geometry_data.type = 'airfoil' # Reference values Geometry_data.reference_values = { \"Area\" : 2.62, \"Length\" : 2.62, \"Depth\" : 1, \"Point\" : [0.25*2.62,0,0] # reference point about which the moment is taken } segment = Segment() segment.tag = 'section_1' segment.chord = 2.62 segment.Airfoil.files = { \"upper\" : \"main_airfoil_upper_1.dat\", \"lower\" : \"main_airfoil_lower_1.dat\" } segment.Airfoil.CST = { \"upper\" :[0.20095, 0.26864, 0.10933, 0.29307,\\ 0.12099, 0.21197, 0.18002, 0.18408], \"lower\" :[-0.20095, 0.05433, -0.46373, 0.25546,\\ -0.40375, 0.01032, -0.14109, -0.11217], \"N1 upper\" : 0.5, \"N1 lower\" : 0.5, \"N2 upper\" : 1.0, \"N2 lower\" : 1.0, \"yte upper\" : 0.001, \"yte lower\" : -0.001 } Geometry_data.Segments.append(segment) segment.plot_airfoil = True # ------------------------------- MESH SETTINGS ---------------------------------------------------------------- # # Mesh_data = Mesh() # Flag to mesh the shape or not Mesh_data.meshing = True # Mesh type Mesh_data.structured = True # Defined the OS in which Pointwise is used # WINDOWS or Linux Mesh_data.operating_system = 'Linux' # Pointwise tclsh directory used in Windows Mesh_data.tclsh_directory = r\"/home/doktorand/Fidelity/Pointwise/Pointwise2022.1\" # Desired Y+ value Mesh_data.Yplus = 1.0 # Define the Glyph template to use for meshing Mesh_data.glyph_file = \"mesh_clean_airfoil_SU2.glf\" # Mesh filename for either the newly generated mesh or an eisting mesh Mesh_data.filename = 'su2meshEx.su2' # Define far-field Mesh_data.far_field = 100 * Geometry_data.reference_values[\"Length\"] Mesh_data.airfoil_mesh_settings = { \"LE_spacing\" : 0.001, # Airfoil leading edge spacing \"TE_spacing\" : 0.0005, # Airfoil trailing edge spacing \"flap_cluster\" : 0.005, \"connector dimensions\" : [200, 200, 8], # \"connector_dimensions\": [200, 120, 150, 150, 70, 25, 8, 8], \"number of normal cells\" : 230 } # ----------------------------------------------------------------------------------------------------------------------------- # # # Pack all inputs Input = Data() Input.Solver = Solver_settings Input.Freestream = Freestream Input.Geometry = Geometry_data Input.Mesh = Mesh_data return Input if __name__ == '__main__': Input = Input_data() run_aerodynamic_analysis(Input)","title":"Inputs"},{"location":"testcases/Clean_airfoil_CST/#results","text":"The magnitude of momentum at altitude 2000 m, speed = 0.25 Mach and angle of attack 3 degree.","title":"Results"},{"location":"testcases/Clean_airfoil_Full/","text":"Clean Airfoil Full Clean Airfoil Full test case is the simulation of the air flow through the clean airfoil (without flaps, just airfoil). In this case, PARSEC airfoil parameterization method is used to create the airfoil geometry. Steps: Setting the input for the simulation The geometry is defined using PARSEC In function run_aerodynamic_analysis , Generate the file for geometry and mesh the geometry Solve using SU2 Read results from the runtime log and save them as csv and vtu Visualize the result using Paraview Inputs import numpy as np from Core.Data import Data from Components.Solver import Solver from Components.Geometry import Geometry from Components.Geometry.Wing.Segment import Segment from Components.Mesh import Mesh from Run_aerodynamic_analysis import run_aerodynamic_analysis def Input_data(): working_dir = r\"/home/doktorand/Software/PyAeroSweep-Stan-V3/PyAeroSweep/Test_Cases/Clean_airfoil_Full\" # ------------------------------- SOLVER SETTINGS ----------------------------------------------------------- # # Solver_settings = Solver() Solver_settings.working_dir = working_dir Solver_settings.name = 'SU2' # SU2 or Fluent # Solver dimensions # 2d or 3d for SU2 Solver_settings.dimensions = '2d' # Only available for SU2 in 3D # defines half od the shape or a full shape analysis (Only symmetric works for now) Solver_settings.symmetric = True # SST or SA for SU2 Solver_settings.turbulence_model = 'SST' # Number of processors Solver_settings.processors = 4 # Cauchy convergence criteria # Could be either LIFT or DRAG Solver_settings.monitor = \"LIFT\" Solver_settings.tolerance = 5e-7 Solver_settings.max_iterations = 100 Solver_settings.save_frequency = 100 # Warm start # YES or NO Solver_settings.warmstart = 'YES' # SU2 reference config file name which will be updated Solver_settings.config_file = 'Run_airfoil_template.cfg' # ------------------------------- FREESTREAM SETTINGS ------------------------------------------------------- # # Freestream = Data() Freestream.Mach = np.array([0.21,0.25]) Freestream.Altitude = np.array([0,2000]) # in meters Freestream.Angle_of_attack = np.array([0.0,3.0,5.0]) # in degrees # ------------------------------- GEOMETRY SETTINGS --------------------------------------------------------- # # Geometry_data = Geometry() # Geometry to analyze ''' Could be airfoil or wing Airfoils can be parametrically defined using the PARSEC methods Wings are defined only using the existing CAD file and work either for straight tapered wings with or without the kink''' Geometry_data.type = 'airfoil' # Reference values Geometry_data.reference_values = { \"Area\" : 2.62, \"Length\" : 2.62, \"Depth\" : 1, \"Point\" : [0.25*2.62,0,0] # reference point about which the moment is taken } segment = Segment() segment.tag = 'section_1' segment.spanwise_location = 0 segment.chord = 2.62 segment.Airfoil.files = { \"upper\" : \"main_airfoil_upper_1.dat\", \"lower\" : \"main_airfoil_lower_1.dat\" } segment.Airfoil.PARSEC = { \"rle\" : 0.0084, # Main airfoil LE radius \"x_pre\" : 0.458080577545180, # x-location of the crest on the pressure side \"y_pre\" : -0.04553160030118, # y-location of the crest on the pressure side \"d2ydx2_pre\" : 0.554845554794938, # curvature of the crest on the pressure side \"th_pre\" : -9.649803736, # trailing edge angle on the pressure side [deg] \"x_suc\" : 0.46036604, # x-location of the crest on the suction side \"y_suc\" : 0.06302395539, # y-location of the crest on the suction side \"d2ydx2_suc\" : -0.361421420, # curvature of the crest on the suction side \"th_suc\" : -12.391677695858, # trailing edge angle on the suction side [deg] \"yte upper\" : 0.002, \"yte lower\" : -0.002 } Geometry_data.Segments.append(segment) segment.plot_airfoil = True # ------------------------------- MESH SETTINGS ---------------------------------------------------------------- # # Mesh_data = Mesh() # Flag to mesh the shape or not Mesh_data.meshing = True # Mesh type Mesh_data.structured = True # Defined the OS in which Pointwise is used # WINDOWS or Linux Mesh_data.operating_system = 'Linux' # Pointwise tclsh directory used in Windows Mesh_data.tclsh_directory = r\"/home/doktorand/Fidelity/Pointwise/Pointwise2022.1\" # Desired Y+ value Mesh_data.Yplus = 1.0 # Define the Glyph template to use for meshing Mesh_data.glyph_file = \"mesh_clean_airfoil_SU2.glf\" # Mesh filename for either the newly generated mesh or an eisting mesh Mesh_data.filename = 'su2meshEx.su2' # Define far-field Mesh_data.far_field = 100 * Geometry_data.reference_values[\"Length\"] Mesh_data.airfoil_mesh_settings = { \"LE_spacing\" : 0.001, # Airfoil leading edge spacing \"TE_spacing\" : 0.0005, # Airfoil trailing edge spacing \"flap_cluster\" : 0.005, \"connector dimensions\" : [200, 200, 8], # \"connector_dimensions\": [200, 120, 150, 150, 70, 25, 8, 8], \"number of normal cells\" : 230 } # ----------------------------------------------------------------------------------------------------------------------------- # # # Pack all inputs Input = Data() Input.Solver = Solver_settings Input.Freestream = Freestream Input.Geometry = Geometry_data Input.Mesh = Mesh_data return Input if __name__ == '__main__': Input = Input_data() run_aerodynamic_analysis(Input) Results The magnitude of momentum at altitude 2000 m, speed = 0.25 Mach and angle of attack 3 degree.","title":"Clean_airfoil_Full"},{"location":"testcases/Clean_airfoil_Full/#clean-airfoil-full","text":"Clean Airfoil Full test case is the simulation of the air flow through the clean airfoil (without flaps, just airfoil). In this case, PARSEC airfoil parameterization method is used to create the airfoil geometry. Steps: Setting the input for the simulation The geometry is defined using PARSEC In function run_aerodynamic_analysis , Generate the file for geometry and mesh the geometry Solve using SU2 Read results from the runtime log and save them as csv and vtu Visualize the result using Paraview","title":"Clean Airfoil Full"},{"location":"testcases/Clean_airfoil_Full/#inputs","text":"import numpy as np from Core.Data import Data from Components.Solver import Solver from Components.Geometry import Geometry from Components.Geometry.Wing.Segment import Segment from Components.Mesh import Mesh from Run_aerodynamic_analysis import run_aerodynamic_analysis def Input_data(): working_dir = r\"/home/doktorand/Software/PyAeroSweep-Stan-V3/PyAeroSweep/Test_Cases/Clean_airfoil_Full\" # ------------------------------- SOLVER SETTINGS ----------------------------------------------------------- # # Solver_settings = Solver() Solver_settings.working_dir = working_dir Solver_settings.name = 'SU2' # SU2 or Fluent # Solver dimensions # 2d or 3d for SU2 Solver_settings.dimensions = '2d' # Only available for SU2 in 3D # defines half od the shape or a full shape analysis (Only symmetric works for now) Solver_settings.symmetric = True # SST or SA for SU2 Solver_settings.turbulence_model = 'SST' # Number of processors Solver_settings.processors = 4 # Cauchy convergence criteria # Could be either LIFT or DRAG Solver_settings.monitor = \"LIFT\" Solver_settings.tolerance = 5e-7 Solver_settings.max_iterations = 100 Solver_settings.save_frequency = 100 # Warm start # YES or NO Solver_settings.warmstart = 'YES' # SU2 reference config file name which will be updated Solver_settings.config_file = 'Run_airfoil_template.cfg' # ------------------------------- FREESTREAM SETTINGS ------------------------------------------------------- # # Freestream = Data() Freestream.Mach = np.array([0.21,0.25]) Freestream.Altitude = np.array([0,2000]) # in meters Freestream.Angle_of_attack = np.array([0.0,3.0,5.0]) # in degrees # ------------------------------- GEOMETRY SETTINGS --------------------------------------------------------- # # Geometry_data = Geometry() # Geometry to analyze ''' Could be airfoil or wing Airfoils can be parametrically defined using the PARSEC methods Wings are defined only using the existing CAD file and work either for straight tapered wings with or without the kink''' Geometry_data.type = 'airfoil' # Reference values Geometry_data.reference_values = { \"Area\" : 2.62, \"Length\" : 2.62, \"Depth\" : 1, \"Point\" : [0.25*2.62,0,0] # reference point about which the moment is taken } segment = Segment() segment.tag = 'section_1' segment.spanwise_location = 0 segment.chord = 2.62 segment.Airfoil.files = { \"upper\" : \"main_airfoil_upper_1.dat\", \"lower\" : \"main_airfoil_lower_1.dat\" } segment.Airfoil.PARSEC = { \"rle\" : 0.0084, # Main airfoil LE radius \"x_pre\" : 0.458080577545180, # x-location of the crest on the pressure side \"y_pre\" : -0.04553160030118, # y-location of the crest on the pressure side \"d2ydx2_pre\" : 0.554845554794938, # curvature of the crest on the pressure side \"th_pre\" : -9.649803736, # trailing edge angle on the pressure side [deg] \"x_suc\" : 0.46036604, # x-location of the crest on the suction side \"y_suc\" : 0.06302395539, # y-location of the crest on the suction side \"d2ydx2_suc\" : -0.361421420, # curvature of the crest on the suction side \"th_suc\" : -12.391677695858, # trailing edge angle on the suction side [deg] \"yte upper\" : 0.002, \"yte lower\" : -0.002 } Geometry_data.Segments.append(segment) segment.plot_airfoil = True # ------------------------------- MESH SETTINGS ---------------------------------------------------------------- # # Mesh_data = Mesh() # Flag to mesh the shape or not Mesh_data.meshing = True # Mesh type Mesh_data.structured = True # Defined the OS in which Pointwise is used # WINDOWS or Linux Mesh_data.operating_system = 'Linux' # Pointwise tclsh directory used in Windows Mesh_data.tclsh_directory = r\"/home/doktorand/Fidelity/Pointwise/Pointwise2022.1\" # Desired Y+ value Mesh_data.Yplus = 1.0 # Define the Glyph template to use for meshing Mesh_data.glyph_file = \"mesh_clean_airfoil_SU2.glf\" # Mesh filename for either the newly generated mesh or an eisting mesh Mesh_data.filename = 'su2meshEx.su2' # Define far-field Mesh_data.far_field = 100 * Geometry_data.reference_values[\"Length\"] Mesh_data.airfoil_mesh_settings = { \"LE_spacing\" : 0.001, # Airfoil leading edge spacing \"TE_spacing\" : 0.0005, # Airfoil trailing edge spacing \"flap_cluster\" : 0.005, \"connector dimensions\" : [200, 200, 8], # \"connector_dimensions\": [200, 120, 150, 150, 70, 25, 8, 8], \"number of normal cells\" : 230 } # ----------------------------------------------------------------------------------------------------------------------------- # # # Pack all inputs Input = Data() Input.Solver = Solver_settings Input.Freestream = Freestream Input.Geometry = Geometry_data Input.Mesh = Mesh_data return Input if __name__ == '__main__': Input = Input_data() run_aerodynamic_analysis(Input)","title":"Inputs"},{"location":"testcases/Clean_airfoil_Full/#results","text":"The magnitude of momentum at altitude 2000 m, speed = 0.25 Mach and angle of attack 3 degree.","title":"Results"},{"location":"testcases/Flapped_airfoil_CST/","text":"Flapped Airfoil CST Flapped Airfoil CST test case is the simulation of the air flow through the flapped airfoil. CST (Class-Shape Transformation) is one way to define the geometry of the airfoil. For futher information follow this link CST Airfoil Geometry (only main is CST for flap is modelled by PARSEC) Steps: Setting the input for the simulation The geometry is defined using CST(main) and PARSEC (flap) In function run_aerodynamic_analysis , Generate the file for geometry and mesh the geometry Solve using SU2 Read results from the runtime log and save them as csv and vtu Visualize the result using Paraview Inputs import numpy as np from Core.Data import Data from Components.Solver import Solver from Components.Geometry import Geometry from Components.Geometry.Wing.Segment import Segment from Components.Mesh import Mesh from Run_aerodynamic_analysis import run_aerodynamic_analysis def Input_data(): working_dir = r\"/home/doktorand/Software/PyAeroSweep-Stan-V3/PyAeroSweep/Test_Cases/Flapped_airfoil_full\" # ------------------------------- SOLVER SETTINGS ----------------------------------------------------------- # # Solver_settings = Solver() Solver_settings.working_dir = working_dir Solver_settings.name = 'SU2' # SU2 or Fluent # Solver dimensions # 2d or 3d for SU2 Solver_settings.dimensions = '2d' # Only available for SU2 in 3D # defines half od the shape or a full shape analysis (Only symmetric works for now) Solver_settings.symmetric = True # SST or SA for SU2 Solver_settings.turbulence_model = 'SST' # Number of processors Solver_settings.processors = 7 # Cauchy convergence criteria # Could be either LIFT or DRAG Solver_settings.monitor = \"LIFT\" Solver_settings.tolerance = 5e-7 Solver_settings.max_iterations = 100 Solver_settings.save_frequency = 100 # Warm start # YES or NO Solver_settings.warmstart = 'YES' # SU2 reference config file name which will be updated Solver_settings.config_file = 'Run_airfoil_template.cfg' # ------------------------------- FREESTREAM SETTINGS ------------------------------------------------------- # # Freestream = Data() Freestream.Mach = np.array([0.21]) Freestream.Altitude = np.array([0,2000]) # in meters Freestream.Angle_of_attack = np.array([0.0,3.0,5.0]) # in degrees # ------------------------------- GEOMETRY SETTINGS --------------------------------------------------------- # # Geometry_data = Geometry() # Geometry to analyze ''' Could be airfoil or wing Airfoils can be parametrically defined using the PARSEC methods Wings are defined only using the existing CAD file and work either for straight tapered wings with or without the kink''' Geometry_data.type = 'airfoil' # Reference values Geometry_data.reference_values = { \"Area\" : 2.62, \"Length\" : 2.62, \"Depth\" : 1, \"Point\" : [0.25*2.62,0,0] # reference point about which the moment is taken } # Flag to use PARSEC parametrization or to use already existing airfoils Geometry_data.generate = True segment = Segment() segment.tag = 'section_1' segment.chord = 2.62 segment.Airfoil.files = { \"upper\" : \"main_airfoil_upper_1.dat\", \"lower\" : \"main_airfoil_lower_1.dat\" } segment.Airfoil.CST = { \"upper\" :[0.20095, 0.26864, 0.10933, 0.29307,\\ 0.12099, 0.21197, 0.18002, 0.18408], \"lower\" :[-0.20095, 0.05433, -0.46373, 0.25546,\\ -0.40375, 0.01032, -0.14109, -0.11217], \"N1 upper\" : 0.5, \"N1 lower\" : 0.5, \"N2 upper\" : 1.0, \"N2 lower\" : 1.0, \"yte upper\" : 0.001, \"yte lower\" : -0.001 } segment.TrailingEdgeDevice.type = 'Slotted' segment.TrailingEdgeDevice.PARSEC = { \"cf_c\" : 0.3, # flap chord ratio \"ce_c\" : 0.3, # conical curve extent ratio wrt the flap chord length \"csr_c\" : 0.85, # shroud chord ratio \"clip_ext\" : 0.05, # shroud lip extent ratio wrt the flap \"r_le_flap\" : 0.01, # flap leading edge radius \"tc_shr_tip\" : 0.003, # shroud tip thickness \"w_conic\" : 0.5, # conical parameter for the suction side of the flap airfoil \"delta_f\" : 40, # flap deflection [deg] \"x_gap\" : 0.01, # x-length gap from the shroud TE (positive value is moving the flap left) \"y_gap\" : 0.005, # y-length gap from the shroud TE (positive value is moving the flap down) } segment.TrailingEdgeDevice.files = { \"upper surface file\" : \"flap_airfoil_upper.dat\", \"lower surface file\" : \"flap_airfoil_lower.dat\", \"flap cutout\" : [\"main_airfoil_cut1.dat\", \"main_airfoil_cut2.dat\"] } segment.LeadingEdgeDevice.type = 'Droop' segment.LeadingEdgeDevice.PARSEC = { \"delta_s\" : 15, # droop nose deflection [deg] \"cs_c\" : 0.10, # droop nose chord ratio \"d_cs_up\" : 0.03, # droop nose offset from the hinge on the upper surface \"d_cs_low\" : 0.03, # shroud lip extent ratio wrt the flap \"w_con_seal\" : 1.0 # conical parameter for the droop nose seal } segment.plot_airfoil = True Geometry_data.Segments.append(segment) # ------------------------------- MESH SETTINGS ---------------------------------------------------------------- # # Mesh_data = Mesh() # Flag to mesh the shape or not Mesh_data.meshing = True # Mesh type Mesh_data.structured = False # Defined the OS in which Pointwise is used # WINDOWS or Linux Mesh_data.operating_system = 'Linux' # Pointwise tclsh directory used in Windows Mesh_data.tclsh_directory = r\"/home/doktorand/Fidelity/Pointwise/Pointwise2022.1\" # Desired Y+ value Mesh_data.Yplus = 1.0 # Define the Glyph template to use for meshing Mesh_data.glyph_file = \"mesh_flapped_airfoil_SU2.glf\" # Mesh filename for either the newly generated mesh or an eisting mesh Mesh_data.filename = 'su2meshEx.su2' # Define far-field # min x, max x # min y, max y # min z, max z (used only for 3D cases) Mesh_data.far_field = [[-60, 60], [-60 ,60]] Mesh_data.airfoil_mesh_settings = { \"LE_spacing\" : 0.001, # Airfoil leading edge spacing \"TE_spacing\" : 0.0005, # Airfoil trailing edge spacing \"LE_flap_spacing\" : 0.001, \"TE_flap_spacing\" : 0.0005, \"flap_cut_cluster\" : 0.005, # Cluster at the flap cutout corner \"connector dimensions\" : [200, 120, 150, 150, 70, 25, 8, 8], # \"near-field refinement radius 1\" : 9, \"near-field refinement radius 2\" : 45, \"near-field nodes\" : 100, \"far-field connectors\" : 20, \"Max TREX layers\" : 100, \"near-field boundary decay 0\" : 0.85, \"Full TREX layers\" : 60, \"TREX growth rate\" : 1.1, \"near-field boundary decay 2\" : 0.75, \"near-field boundary decay 1\" : 0.85 } # ----------------------------------------------------------------------------------------------------------------------------- # # # Pack all inputs Input = Data() Input.Solver = Solver_settings Input.Freestream = Freestream Input.Geometry = Geometry_data Input.Mesh = Mesh_data return Input if __name__ == '__main__': Input = Input_data() run_aerodynamic_analysis(Input) Results The magnitude of momentum at altitude 2000 m, speed = 0.21 Mach and angle of attack 3 degree.","title":"Flapped_airfoil_CST"},{"location":"testcases/Flapped_airfoil_CST/#flapped-airfoil-cst","text":"Flapped Airfoil CST test case is the simulation of the air flow through the flapped airfoil. CST (Class-Shape Transformation) is one way to define the geometry of the airfoil. For futher information follow this link CST Airfoil Geometry (only main is CST for flap is modelled by PARSEC) Steps: Setting the input for the simulation The geometry is defined using CST(main) and PARSEC (flap) In function run_aerodynamic_analysis , Generate the file for geometry and mesh the geometry Solve using SU2 Read results from the runtime log and save them as csv and vtu Visualize the result using Paraview","title":"Flapped Airfoil CST"},{"location":"testcases/Flapped_airfoil_CST/#inputs","text":"import numpy as np from Core.Data import Data from Components.Solver import Solver from Components.Geometry import Geometry from Components.Geometry.Wing.Segment import Segment from Components.Mesh import Mesh from Run_aerodynamic_analysis import run_aerodynamic_analysis def Input_data(): working_dir = r\"/home/doktorand/Software/PyAeroSweep-Stan-V3/PyAeroSweep/Test_Cases/Flapped_airfoil_full\" # ------------------------------- SOLVER SETTINGS ----------------------------------------------------------- # # Solver_settings = Solver() Solver_settings.working_dir = working_dir Solver_settings.name = 'SU2' # SU2 or Fluent # Solver dimensions # 2d or 3d for SU2 Solver_settings.dimensions = '2d' # Only available for SU2 in 3D # defines half od the shape or a full shape analysis (Only symmetric works for now) Solver_settings.symmetric = True # SST or SA for SU2 Solver_settings.turbulence_model = 'SST' # Number of processors Solver_settings.processors = 7 # Cauchy convergence criteria # Could be either LIFT or DRAG Solver_settings.monitor = \"LIFT\" Solver_settings.tolerance = 5e-7 Solver_settings.max_iterations = 100 Solver_settings.save_frequency = 100 # Warm start # YES or NO Solver_settings.warmstart = 'YES' # SU2 reference config file name which will be updated Solver_settings.config_file = 'Run_airfoil_template.cfg' # ------------------------------- FREESTREAM SETTINGS ------------------------------------------------------- # # Freestream = Data() Freestream.Mach = np.array([0.21]) Freestream.Altitude = np.array([0,2000]) # in meters Freestream.Angle_of_attack = np.array([0.0,3.0,5.0]) # in degrees # ------------------------------- GEOMETRY SETTINGS --------------------------------------------------------- # # Geometry_data = Geometry() # Geometry to analyze ''' Could be airfoil or wing Airfoils can be parametrically defined using the PARSEC methods Wings are defined only using the existing CAD file and work either for straight tapered wings with or without the kink''' Geometry_data.type = 'airfoil' # Reference values Geometry_data.reference_values = { \"Area\" : 2.62, \"Length\" : 2.62, \"Depth\" : 1, \"Point\" : [0.25*2.62,0,0] # reference point about which the moment is taken } # Flag to use PARSEC parametrization or to use already existing airfoils Geometry_data.generate = True segment = Segment() segment.tag = 'section_1' segment.chord = 2.62 segment.Airfoil.files = { \"upper\" : \"main_airfoil_upper_1.dat\", \"lower\" : \"main_airfoil_lower_1.dat\" } segment.Airfoil.CST = { \"upper\" :[0.20095, 0.26864, 0.10933, 0.29307,\\ 0.12099, 0.21197, 0.18002, 0.18408], \"lower\" :[-0.20095, 0.05433, -0.46373, 0.25546,\\ -0.40375, 0.01032, -0.14109, -0.11217], \"N1 upper\" : 0.5, \"N1 lower\" : 0.5, \"N2 upper\" : 1.0, \"N2 lower\" : 1.0, \"yte upper\" : 0.001, \"yte lower\" : -0.001 } segment.TrailingEdgeDevice.type = 'Slotted' segment.TrailingEdgeDevice.PARSEC = { \"cf_c\" : 0.3, # flap chord ratio \"ce_c\" : 0.3, # conical curve extent ratio wrt the flap chord length \"csr_c\" : 0.85, # shroud chord ratio \"clip_ext\" : 0.05, # shroud lip extent ratio wrt the flap \"r_le_flap\" : 0.01, # flap leading edge radius \"tc_shr_tip\" : 0.003, # shroud tip thickness \"w_conic\" : 0.5, # conical parameter for the suction side of the flap airfoil \"delta_f\" : 40, # flap deflection [deg] \"x_gap\" : 0.01, # x-length gap from the shroud TE (positive value is moving the flap left) \"y_gap\" : 0.005, # y-length gap from the shroud TE (positive value is moving the flap down) } segment.TrailingEdgeDevice.files = { \"upper surface file\" : \"flap_airfoil_upper.dat\", \"lower surface file\" : \"flap_airfoil_lower.dat\", \"flap cutout\" : [\"main_airfoil_cut1.dat\", \"main_airfoil_cut2.dat\"] } segment.LeadingEdgeDevice.type = 'Droop' segment.LeadingEdgeDevice.PARSEC = { \"delta_s\" : 15, # droop nose deflection [deg] \"cs_c\" : 0.10, # droop nose chord ratio \"d_cs_up\" : 0.03, # droop nose offset from the hinge on the upper surface \"d_cs_low\" : 0.03, # shroud lip extent ratio wrt the flap \"w_con_seal\" : 1.0 # conical parameter for the droop nose seal } segment.plot_airfoil = True Geometry_data.Segments.append(segment) # ------------------------------- MESH SETTINGS ---------------------------------------------------------------- # # Mesh_data = Mesh() # Flag to mesh the shape or not Mesh_data.meshing = True # Mesh type Mesh_data.structured = False # Defined the OS in which Pointwise is used # WINDOWS or Linux Mesh_data.operating_system = 'Linux' # Pointwise tclsh directory used in Windows Mesh_data.tclsh_directory = r\"/home/doktorand/Fidelity/Pointwise/Pointwise2022.1\" # Desired Y+ value Mesh_data.Yplus = 1.0 # Define the Glyph template to use for meshing Mesh_data.glyph_file = \"mesh_flapped_airfoil_SU2.glf\" # Mesh filename for either the newly generated mesh or an eisting mesh Mesh_data.filename = 'su2meshEx.su2' # Define far-field # min x, max x # min y, max y # min z, max z (used only for 3D cases) Mesh_data.far_field = [[-60, 60], [-60 ,60]] Mesh_data.airfoil_mesh_settings = { \"LE_spacing\" : 0.001, # Airfoil leading edge spacing \"TE_spacing\" : 0.0005, # Airfoil trailing edge spacing \"LE_flap_spacing\" : 0.001, \"TE_flap_spacing\" : 0.0005, \"flap_cut_cluster\" : 0.005, # Cluster at the flap cutout corner \"connector dimensions\" : [200, 120, 150, 150, 70, 25, 8, 8], # \"near-field refinement radius 1\" : 9, \"near-field refinement radius 2\" : 45, \"near-field nodes\" : 100, \"far-field connectors\" : 20, \"Max TREX layers\" : 100, \"near-field boundary decay 0\" : 0.85, \"Full TREX layers\" : 60, \"TREX growth rate\" : 1.1, \"near-field boundary decay 2\" : 0.75, \"near-field boundary decay 1\" : 0.85 } # ----------------------------------------------------------------------------------------------------------------------------- # # # Pack all inputs Input = Data() Input.Solver = Solver_settings Input.Freestream = Freestream Input.Geometry = Geometry_data Input.Mesh = Mesh_data return Input if __name__ == '__main__': Input = Input_data() run_aerodynamic_analysis(Input)","title":"Inputs"},{"location":"testcases/Flapped_airfoil_CST/#results","text":"The magnitude of momentum at altitude 2000 m, speed = 0.21 Mach and angle of attack 3 degree.","title":"Results"},{"location":"testcases/Flapped_airfoil_PARSEC/","text":"Flapped Airfoil PARSEC Flapped Airfoil PARSEC test case is the simulation of the air flow through the flapped airfoil. PARSEC airfoil parameterization method is used to create the airfoil geometry (both main and flap). Steps: Setting the input for the simulation The geometry is defined using PARSEC In function run_aerodynamic_analysis , Generate the file for geometry and mesh the geometry Solve using SU2 Read results from the runtime log and save them as csv and vtu Visualize the result using Paraview Inputs import numpy as np from Core.Data import Data from Components.Solver import Solver from Components.Geometry import Geometry from Components.Geometry.Wing.Segment import Segment from Components.Mesh import Mesh from Run_aerodynamic_analysis import run_aerodynamic_analysis def Input_data(): working_dir = r\"/home/doktorand/Software/PyAeroSweep-Stan-V3/PyAeroSweep/Test_Cases/Flapped_airfoil_full\" # ------------------------------- SOLVER SETTINGS ----------------------------------------------------------- # # Solver_settings = Solver() Solver_settings.working_dir = working_dir Solver_settings.name = 'SU2' # SU2 or Fluent # Solver dimensions # 2d or 3d for SU2 Solver_settings.dimensions = '2d' # Only available for SU2 in 3D # defines half od the shape or a full shape analysis (Only symmetric works for now) Solver_settings.symmetric = True # SST or SA for SU2 Solver_settings.turbulence_model = 'SST' # Number of processors Solver_settings.processors = 7 # Cauchy convergence criteria # Could be either LIFT or DRAG Solver_settings.monitor = \"LIFT\" Solver_settings.tolerance = 5e-7 Solver_settings.max_iterations = 100 Solver_settings.save_frequency = 100 # Warm start # YES or NO Solver_settings.warmstart = 'YES' # SU2 reference config file name which will be updated Solver_settings.config_file = 'Run_airfoil_template.cfg' # ------------------------------- FREESTREAM SETTINGS ------------------------------------------------------- # # Freestream = Data() Freestream.Mach = np.array([0.21]) Freestream.Altitude = np.array([0,2000]) # in meters Freestream.Angle_of_attack = np.array([0.0,3.0,5.0]) # in degrees # ------------------------------- GEOMETRY SETTINGS --------------------------------------------------------- # # Geometry_data = Geometry() # Geometry to analyze ''' Could be airfoil or wing Airfoils can be parametrically defined using the PARSEC methods Wings are defined only using the existing CAD file and work either for straight tapered wings with or without the kink''' Geometry_data.type = 'airfoil' # Reference values Geometry_data.reference_values = { \"Area\" : 2.62, \"Length\" : 2.62, \"Depth\" : 1, \"Point\" : [0.25*2.62,0,0] # reference point about which the moment is taken } # Flag to use PARSEC parametrization or to use already existing airfoils Geometry_data.generate = True segment = Segment() segment.tag = 'section_1' segment.chord = 2.62 segment.Airfoil.files = { \"upper\" : \"main_airfoil_upper_1.dat\", \"lower\" : \"main_airfoil_lower_1.dat\" } segment.Airfoil.PARSEC = { \"rle\" : 0.0084, # Main airfoil LE radius \"x_pre\" : 0.458080577545180, # x-location of the crest on the pressure side \"y_pre\" : -0.04553160030118, # y-location of the crest on the pressure side \"d2ydx2_pre\" : 0.554845554794938, # curvature of the crest on the pressure side \"th_pre\" : -9.649803736, # trailing edge angle on the pressure side [deg] \"x_suc\" : 0.46036604, # x-location of the crest on the suction side \"y_suc\" : 0.06302395539, # y-location of the crest on the suction side \"d2ydx2_suc\" : -0.361421420, # curvature of the crest on the suction side \"th_suc\" : -12.391677695858, # trailing edge angle on the suction side [deg] \"yte upper\" : 0.002, \"yte lower\" : -0.002 } segment.TrailingEdgeDevice.type = 'Slotted' segment.TrailingEdgeDevice.PARSEC = { \"cf_c\" : 0.3, # flap chord ratio \"ce_c\" : 0.3, # conical curve extent ratio wrt the flap chord length \"csr_c\" : 0.85, # shroud chord ratio \"clip_ext\" : 0.05, # shroud lip extent ratio wrt the flap \"r_le_flap\" : 0.01, # flap leading edge radius \"tc_shr_tip\" : 0.003, # shroud tip thickness \"w_conic\" : 0.5, # conical parameter for the suction side of the flap airfoil \"delta_f\" : 40, # flap deflection [deg] \"x_gap\" : 0.01, # x-length gap from the shroud TE (positive value is moving the flap left) \"y_gap\" : 0.005, # y-length gap from the shroud TE (positive value is moving the flap down) } segment.TrailingEdgeDevice.files = { \"upper surface file\" : \"flap_airfoil_upper.dat\", \"lower surface file\" : \"flap_airfoil_lower.dat\", \"flap cutout\" : [\"main_airfoil_cut1.dat\", \"main_airfoil_cut2.dat\"] } segment.LeadingEdgeDevice.type = 'Droop' segment.LeadingEdgeDevice.PARSEC = { \"delta_s\" : 15, # droop nose deflection [deg] \"cs_c\" : 0.10, # droop nose chord ratio \"d_cs_up\" : 0.03, # droop nose offset from the hinge on the upper surface \"d_cs_low\" : 0.03, # shroud lip extent ratio wrt the flap \"w_con_seal\" : 1.0 # conical parameter for the droop nose seal } segment.plot_airfoil = True Geometry_data.Segments.append(segment) # ------------------------------- MESH SETTINGS ---------------------------------------------------------------- # # Mesh_data = Mesh() # Flag to mesh the shape or not Mesh_data.meshing = True # Mesh type Mesh_data.structured = False # Defined the OS in which Pointwise is used # WINDOWS or Linux Mesh_data.operating_system = 'Linux' # Pointwise tclsh directory used in Windows Mesh_data.tclsh_directory = r\"/home/doktorand/Fidelity/Pointwise/Pointwise2022.1\" # Desired Y+ value Mesh_data.Yplus = 1.0 # Define the Glyph template to use for meshing Mesh_data.glyph_file = \"mesh_flapped_airfoil_SU2.glf\" # Mesh filename for either the newly generated mesh or an eisting mesh Mesh_data.filename = 'su2meshEx.su2' # Define far-field # min x, max x # min y, max y # min z, max z (used only for 3D cases) Mesh_data.far_field = [[-60, 60], [-60 ,60]] Mesh_data.airfoil_mesh_settings = { \"LE_spacing\" : 0.001, # Airfoil leading edge spacing \"TE_spacing\" : 0.0005, # Airfoil trailing edge spacing \"LE_flap_spacing\" : 0.001, \"TE_flap_spacing\" : 0.0005, \"flap_cut_cluster\" : 0.005, # Cluster at the flap cutout corner \"connector dimensions\" : [200, 120, 150, 150, 70, 25, 8, 8], # \"near-field refinement radius 1\" : 9, \"near-field refinement radius 2\" : 45, \"near-field nodes\" : 100, \"far-field connectors\" : 20, \"Max TREX layers\" : 100, \"near-field boundary decay 0\" : 0.85, \"Full TREX layers\" : 60, \"TREX growth rate\" : 1.1, \"near-field boundary decay 2\" : 0.75, \"near-field boundary decay 1\" : 0.85 } # ----------------------------------------------------------------------------------------------------------------------------- # # # Pack all inputs Input = Data() Input.Solver = Solver_settings Input.Freestream = Freestream Input.Geometry = Geometry_data Input.Mesh = Mesh_data return Input if __name__ == '__main__': Input = Input_data() run_aerodynamic_analysis(Input) Results The magnitude of momentum at altitude 2000 m, speed = 0.21 Mach and angle of attack 3 degree.","title":"Flapped_airfoil_CST"},{"location":"testcases/Flapped_airfoil_PARSEC/#flapped-airfoil-parsec","text":"Flapped Airfoil PARSEC test case is the simulation of the air flow through the flapped airfoil. PARSEC airfoil parameterization method is used to create the airfoil geometry (both main and flap). Steps: Setting the input for the simulation The geometry is defined using PARSEC In function run_aerodynamic_analysis , Generate the file for geometry and mesh the geometry Solve using SU2 Read results from the runtime log and save them as csv and vtu Visualize the result using Paraview","title":"Flapped Airfoil PARSEC"},{"location":"testcases/Flapped_airfoil_PARSEC/#inputs","text":"import numpy as np from Core.Data import Data from Components.Solver import Solver from Components.Geometry import Geometry from Components.Geometry.Wing.Segment import Segment from Components.Mesh import Mesh from Run_aerodynamic_analysis import run_aerodynamic_analysis def Input_data(): working_dir = r\"/home/doktorand/Software/PyAeroSweep-Stan-V3/PyAeroSweep/Test_Cases/Flapped_airfoil_full\" # ------------------------------- SOLVER SETTINGS ----------------------------------------------------------- # # Solver_settings = Solver() Solver_settings.working_dir = working_dir Solver_settings.name = 'SU2' # SU2 or Fluent # Solver dimensions # 2d or 3d for SU2 Solver_settings.dimensions = '2d' # Only available for SU2 in 3D # defines half od the shape or a full shape analysis (Only symmetric works for now) Solver_settings.symmetric = True # SST or SA for SU2 Solver_settings.turbulence_model = 'SST' # Number of processors Solver_settings.processors = 7 # Cauchy convergence criteria # Could be either LIFT or DRAG Solver_settings.monitor = \"LIFT\" Solver_settings.tolerance = 5e-7 Solver_settings.max_iterations = 100 Solver_settings.save_frequency = 100 # Warm start # YES or NO Solver_settings.warmstart = 'YES' # SU2 reference config file name which will be updated Solver_settings.config_file = 'Run_airfoil_template.cfg' # ------------------------------- FREESTREAM SETTINGS ------------------------------------------------------- # # Freestream = Data() Freestream.Mach = np.array([0.21]) Freestream.Altitude = np.array([0,2000]) # in meters Freestream.Angle_of_attack = np.array([0.0,3.0,5.0]) # in degrees # ------------------------------- GEOMETRY SETTINGS --------------------------------------------------------- # # Geometry_data = Geometry() # Geometry to analyze ''' Could be airfoil or wing Airfoils can be parametrically defined using the PARSEC methods Wings are defined only using the existing CAD file and work either for straight tapered wings with or without the kink''' Geometry_data.type = 'airfoil' # Reference values Geometry_data.reference_values = { \"Area\" : 2.62, \"Length\" : 2.62, \"Depth\" : 1, \"Point\" : [0.25*2.62,0,0] # reference point about which the moment is taken } # Flag to use PARSEC parametrization or to use already existing airfoils Geometry_data.generate = True segment = Segment() segment.tag = 'section_1' segment.chord = 2.62 segment.Airfoil.files = { \"upper\" : \"main_airfoil_upper_1.dat\", \"lower\" : \"main_airfoil_lower_1.dat\" } segment.Airfoil.PARSEC = { \"rle\" : 0.0084, # Main airfoil LE radius \"x_pre\" : 0.458080577545180, # x-location of the crest on the pressure side \"y_pre\" : -0.04553160030118, # y-location of the crest on the pressure side \"d2ydx2_pre\" : 0.554845554794938, # curvature of the crest on the pressure side \"th_pre\" : -9.649803736, # trailing edge angle on the pressure side [deg] \"x_suc\" : 0.46036604, # x-location of the crest on the suction side \"y_suc\" : 0.06302395539, # y-location of the crest on the suction side \"d2ydx2_suc\" : -0.361421420, # curvature of the crest on the suction side \"th_suc\" : -12.391677695858, # trailing edge angle on the suction side [deg] \"yte upper\" : 0.002, \"yte lower\" : -0.002 } segment.TrailingEdgeDevice.type = 'Slotted' segment.TrailingEdgeDevice.PARSEC = { \"cf_c\" : 0.3, # flap chord ratio \"ce_c\" : 0.3, # conical curve extent ratio wrt the flap chord length \"csr_c\" : 0.85, # shroud chord ratio \"clip_ext\" : 0.05, # shroud lip extent ratio wrt the flap \"r_le_flap\" : 0.01, # flap leading edge radius \"tc_shr_tip\" : 0.003, # shroud tip thickness \"w_conic\" : 0.5, # conical parameter for the suction side of the flap airfoil \"delta_f\" : 40, # flap deflection [deg] \"x_gap\" : 0.01, # x-length gap from the shroud TE (positive value is moving the flap left) \"y_gap\" : 0.005, # y-length gap from the shroud TE (positive value is moving the flap down) } segment.TrailingEdgeDevice.files = { \"upper surface file\" : \"flap_airfoil_upper.dat\", \"lower surface file\" : \"flap_airfoil_lower.dat\", \"flap cutout\" : [\"main_airfoil_cut1.dat\", \"main_airfoil_cut2.dat\"] } segment.LeadingEdgeDevice.type = 'Droop' segment.LeadingEdgeDevice.PARSEC = { \"delta_s\" : 15, # droop nose deflection [deg] \"cs_c\" : 0.10, # droop nose chord ratio \"d_cs_up\" : 0.03, # droop nose offset from the hinge on the upper surface \"d_cs_low\" : 0.03, # shroud lip extent ratio wrt the flap \"w_con_seal\" : 1.0 # conical parameter for the droop nose seal } segment.plot_airfoil = True Geometry_data.Segments.append(segment) # ------------------------------- MESH SETTINGS ---------------------------------------------------------------- # # Mesh_data = Mesh() # Flag to mesh the shape or not Mesh_data.meshing = True # Mesh type Mesh_data.structured = False # Defined the OS in which Pointwise is used # WINDOWS or Linux Mesh_data.operating_system = 'Linux' # Pointwise tclsh directory used in Windows Mesh_data.tclsh_directory = r\"/home/doktorand/Fidelity/Pointwise/Pointwise2022.1\" # Desired Y+ value Mesh_data.Yplus = 1.0 # Define the Glyph template to use for meshing Mesh_data.glyph_file = \"mesh_flapped_airfoil_SU2.glf\" # Mesh filename for either the newly generated mesh or an eisting mesh Mesh_data.filename = 'su2meshEx.su2' # Define far-field # min x, max x # min y, max y # min z, max z (used only for 3D cases) Mesh_data.far_field = [[-60, 60], [-60 ,60]] Mesh_data.airfoil_mesh_settings = { \"LE_spacing\" : 0.001, # Airfoil leading edge spacing \"TE_spacing\" : 0.0005, # Airfoil trailing edge spacing \"LE_flap_spacing\" : 0.001, \"TE_flap_spacing\" : 0.0005, \"flap_cut_cluster\" : 0.005, # Cluster at the flap cutout corner \"connector dimensions\" : [200, 120, 150, 150, 70, 25, 8, 8], # \"near-field refinement radius 1\" : 9, \"near-field refinement radius 2\" : 45, \"near-field nodes\" : 100, \"far-field connectors\" : 20, \"Max TREX layers\" : 100, \"near-field boundary decay 0\" : 0.85, \"Full TREX layers\" : 60, \"TREX growth rate\" : 1.1, \"near-field boundary decay 2\" : 0.75, \"near-field boundary decay 1\" : 0.85 } # ----------------------------------------------------------------------------------------------------------------------------- # # # Pack all inputs Input = Data() Input.Solver = Solver_settings Input.Freestream = Freestream Input.Geometry = Geometry_data Input.Mesh = Mesh_data return Input if __name__ == '__main__': Input = Input_data() run_aerodynamic_analysis(Input)","title":"Inputs"},{"location":"testcases/Flapped_airfoil_PARSEC/#results","text":"The magnitude of momentum at altitude 2000 m, speed = 0.21 Mach and angle of attack 3 degree.","title":"Results"},{"location":"testcases/Full_3D_Wing/","text":"3D Wing In this case, we simulate the 3D case of the wing Inputs import numpy as np from Core.Data import Data from Components.Solver import Solver from Components.Geometry import Geometry from Components.Geometry.Wing.Segment import Segment from Components.Mesh import Mesh from Run_aerodynamic_analysis import run_aerodynamic_analysis def Input_data_3D_wing(): working_dir = r\"/home/doktorand/Software/PyAeroSweep-Stan-V3/PyAeroSweep/Test_Cases/Full_3D_wing/Case2\" # ------------------------------- SOLVER SETTINGS ----------------------------------------------------------- # # Solver_settings = Solver() Solver_settings.working_dir = working_dir Solver_settings.name = 'SU2' # SU2 or Fluent # Solver dimensions # 2d or 3d for SU2 Solver_settings.dimensions = '3d' # Only available for SU2 in 3D # defines half od the shape or a full shape analysis (Only symmetric works for now) Solver_settings.symmetric = True # SST, SA, or Inviscid for SU2 Solver_settings.turbulence_model = 'SST' # Number of processors Solver_settings.processors = 7 # Cauchy convergence criteria # Could be either LIFT or DRAG Solver_settings.monitor = \"LIFT\" Solver_settings.tolerance = 5e-7 Solver_settings.max_iterations = 50000 # Warm start # YES or NO Solver_settings.warmstart = 'YES' # SU2 reference config file name which will be updated Solver_settings.config_file = 'Wing_template.cfg' # ------------------------------- FREESTREAM SETTINGS ------------------------------------------------------- # # Freestream = Data() Freestream.Mach = np.array([0.21]) Freestream.Altitude = np.array([0]) # in meters Freestream.Angle_of_attack = np.array([0.0]) # in degrees # ------------------------------- GEOMETRY SETTINGS --------------------------------------------------------- # # Geometry_data = Geometry() # Geometry to analyze ''' Could be airfoil or wing Airfoils can be parametrically defined using the PARSEC methods Wings are defined only using the existing CAD file and work either for straight tapered wings with or without the kink''' Geometry_data.type = 'wing' # Reference values Geometry_data.reference_values = { \"Area\" : 2.62, \"Length\" : 2.62, \"Depth\" : 1, \"Point\" : [0.25*2.62,0,0] # reference point about which the moment is taken } Geometry.filename = \"Wing_geometry\" Geometry.format = 'igs' # Saves in igs by default # Can also save in Tecplot of VTK formats Geometry.output_format = \"Tecplot\" # Flag to use PARSEC parametrization or to use already existing airfoils Geometry_data.PARSEC = True # Polynomial fit options # 2 - liner; 3 - quadratic; 4 - quatic Geometry_data.polynomial_fit = 2 # Airfoil files are used either to write PARSEC-generated airfoil and then read by Pointwise or to read directly from them segment = Segment() segment.tag = 'section_1' segment.spanwise_location = 0 segment.chord = 7.760 segment.incidence = 2 segment.dihedral = 3 segment.leading_edge_sweep = 30 segment.Airfoil.files = { \"upper\" : \"main_airfoil_upper_1.dat\", \"lower\" : \"main_airfoil_lower_1.dat\" } segment.Airfoil.PARSEC = { \"rle\" : 0.0084, # Main airfoil LE radius \"x_pre\" : 0.458080577545180, # x-location of the crest on the pressure side \"y_pre\" : -0.04553160030118, # y-location of the crest on the pressure side \"d2ydx2_pre\" : 0.554845554794938, # curvature of the crest on the pressure side \"th_pre\" : -9.649803736, # trailing edge angle on the pressure side [deg] \"x_suc\" : 0.46036604, # x-location of the crest on the suction side \"y_suc\" : 0.06302395539, # y-location of the crest on the suction side \"d2ydx2_suc\" : -0.361421420, # curvature of the crest on the suction side \"th_suc\" : -12.391677695858, # trailing edge angle on the suction side [deg] \"yte upper\" : 0.002, \"yte lower\" : -0.002 # trailing edge angle on the suction side [deg] } Geometry_data.Segments.append(segment) segment = Segment() segment.tag = 'section_2' segment.spanwise_location = 18 segment.chord = 2.0 segment.incidence = -1 segment.dihedral = 25 segment.rotate = False segment.leading_edge_sweep = 45 segment.Airfoil.files = { \"upper\" : \"main_airfoil_upper_2.dat\", \"lower\" : \"main_airfoil_lower_2.dat\" } segment.Airfoil.PARSEC = { \"rle\" : 0.0084, # Main airfoil LE radius \"x_pre\" : 0.458080577545180, # x-location of the crest on the pressure side \"y_pre\" : -0.04553160030118, # y-location of the crest on the pressure side \"d2ydx2_pre\" : 0.554845554794938, # curvature of the crest on the pressure side \"th_pre\" : -9.649803736, # trailing edge angle on the pressure side [deg] \"x_suc\" : 0.46036604, # x-location of the crest on the suction side \"y_suc\" : 0.06302395539, # y-location of the crest on the suction side \"d2ydx2_suc\" : -0.361421420, # curvature of the crest on the suction side \"th_suc\" : -12.391677695858, # trailing edge angle on the suction side [deg] \"yte upper\" : 0.002, \"yte lower\" : -0.002 # trailing edge angle on the suction side [deg] } Geometry_data.Segments.append(segment) # ------------------------------- MESH SETTINGS ---------------------------------------------------------------- # # Mesh_data = Mesh() # Flag to mesh the shape or not Mesh_data.meshing = True # Mesh type Mesh_data.structured = True # Defined the OS in which Pointwise is used # WINDOWS or Linux Mesh_data.operating_system = 'Linux' # Pointwise tclsh directory used in Windows Mesh_data.tclsh_directory = r\"/home/doktorand/Fidelity/Pointwise/Pointwise2022.1\" # Desired Y+ value Mesh_data.Yplus = 30.0 # Define the Glyph template to use for meshing Mesh_data.glyph_file = \"mesh_clean_wing_SU2.glf\" # Mesh filename for either the newly generated mesh or an eisting mesh Mesh_data.filename = 'su2meshEx.su2' Mesh_data.pw_mesh_file = 'mesh_file.pw' Mesh_data.wing_mesh_settings = { \"LE_spacing\" : 0.001, # Airfoil leading edge spacing \"TE_spacing\" : 0.0005, # Airfoil trailing edge spacing \"flap_cluster\" : 0.005, \"connector dimensions\" : [200, 200, 8], # \"connector_dimensions\": [200, 120, 150, 150, 70, 25, 8, 8], \"number of normal cells\" : 230 } # Define far-field # min x, max x # min y, max y # min z, max z (used only for 3D cases) Mesh_data.far_field = [[-60, 60], [-60, 60], [0, 60]] Mesh_data.global_surface_mesh_settings = { \"Min boundary subdivisions\" : 10, \"Max extents subdivisions\" : 300, \"Curvature resolution angle\" : 15, \"Max aspect ratio\" : 100, \"Refinement factor\" : 1.15, \"Boundary gap subdivisions\" : 3 } Mesh_data.trailing_edge_meshing_settings = { \"Trailing edge mapping\" : False, \"Trailing edge cells\" : 10, \"Convex spacing growth rate\" : 0.5, \"Max aspect ratio\" : 100, \"Spacing factor\" : 1 } Mesh_data.boundary_layer_settings = { \"Max layers\" : 50, \"Full layers\" : 1, \"Stop if full layers not met\" : True, \"Allow incomplete layers\" : True, \"Push attributes\" : True, \"Skew criteria equiangle\" : 1, \"Growth rate\" : 1.15, \"Max included angle\" : 170, \"Final cell aspect ratio\" : 1.0, \"Collision buffer\" : 2, \"Centroid skewness\" : 0.8, \"Size field decay\" : 0.75, } # ----------------------------------------------------------------------------------------------------------------------------- # # # Pack all inputs Input = Data() Input.Solver = Solver_settings Input.Freestream = Freestream Input.Geometry = Geometry_data Input.Mesh = Mesh_data return Input if __name__ == '__main__': Input = Input_data_3D_wing() run_aerodynamic_analysis(Input) Results","title":"Full_3D_Wing"},{"location":"testcases/Full_3D_Wing/#3d-wing","text":"In this case, we simulate the 3D case of the wing","title":"3D Wing"},{"location":"testcases/Full_3D_Wing/#inputs","text":"import numpy as np from Core.Data import Data from Components.Solver import Solver from Components.Geometry import Geometry from Components.Geometry.Wing.Segment import Segment from Components.Mesh import Mesh from Run_aerodynamic_analysis import run_aerodynamic_analysis def Input_data_3D_wing(): working_dir = r\"/home/doktorand/Software/PyAeroSweep-Stan-V3/PyAeroSweep/Test_Cases/Full_3D_wing/Case2\" # ------------------------------- SOLVER SETTINGS ----------------------------------------------------------- # # Solver_settings = Solver() Solver_settings.working_dir = working_dir Solver_settings.name = 'SU2' # SU2 or Fluent # Solver dimensions # 2d or 3d for SU2 Solver_settings.dimensions = '3d' # Only available for SU2 in 3D # defines half od the shape or a full shape analysis (Only symmetric works for now) Solver_settings.symmetric = True # SST, SA, or Inviscid for SU2 Solver_settings.turbulence_model = 'SST' # Number of processors Solver_settings.processors = 7 # Cauchy convergence criteria # Could be either LIFT or DRAG Solver_settings.monitor = \"LIFT\" Solver_settings.tolerance = 5e-7 Solver_settings.max_iterations = 50000 # Warm start # YES or NO Solver_settings.warmstart = 'YES' # SU2 reference config file name which will be updated Solver_settings.config_file = 'Wing_template.cfg' # ------------------------------- FREESTREAM SETTINGS ------------------------------------------------------- # # Freestream = Data() Freestream.Mach = np.array([0.21]) Freestream.Altitude = np.array([0]) # in meters Freestream.Angle_of_attack = np.array([0.0]) # in degrees # ------------------------------- GEOMETRY SETTINGS --------------------------------------------------------- # # Geometry_data = Geometry() # Geometry to analyze ''' Could be airfoil or wing Airfoils can be parametrically defined using the PARSEC methods Wings are defined only using the existing CAD file and work either for straight tapered wings with or without the kink''' Geometry_data.type = 'wing' # Reference values Geometry_data.reference_values = { \"Area\" : 2.62, \"Length\" : 2.62, \"Depth\" : 1, \"Point\" : [0.25*2.62,0,0] # reference point about which the moment is taken } Geometry.filename = \"Wing_geometry\" Geometry.format = 'igs' # Saves in igs by default # Can also save in Tecplot of VTK formats Geometry.output_format = \"Tecplot\" # Flag to use PARSEC parametrization or to use already existing airfoils Geometry_data.PARSEC = True # Polynomial fit options # 2 - liner; 3 - quadratic; 4 - quatic Geometry_data.polynomial_fit = 2 # Airfoil files are used either to write PARSEC-generated airfoil and then read by Pointwise or to read directly from them segment = Segment() segment.tag = 'section_1' segment.spanwise_location = 0 segment.chord = 7.760 segment.incidence = 2 segment.dihedral = 3 segment.leading_edge_sweep = 30 segment.Airfoil.files = { \"upper\" : \"main_airfoil_upper_1.dat\", \"lower\" : \"main_airfoil_lower_1.dat\" } segment.Airfoil.PARSEC = { \"rle\" : 0.0084, # Main airfoil LE radius \"x_pre\" : 0.458080577545180, # x-location of the crest on the pressure side \"y_pre\" : -0.04553160030118, # y-location of the crest on the pressure side \"d2ydx2_pre\" : 0.554845554794938, # curvature of the crest on the pressure side \"th_pre\" : -9.649803736, # trailing edge angle on the pressure side [deg] \"x_suc\" : 0.46036604, # x-location of the crest on the suction side \"y_suc\" : 0.06302395539, # y-location of the crest on the suction side \"d2ydx2_suc\" : -0.361421420, # curvature of the crest on the suction side \"th_suc\" : -12.391677695858, # trailing edge angle on the suction side [deg] \"yte upper\" : 0.002, \"yte lower\" : -0.002 # trailing edge angle on the suction side [deg] } Geometry_data.Segments.append(segment) segment = Segment() segment.tag = 'section_2' segment.spanwise_location = 18 segment.chord = 2.0 segment.incidence = -1 segment.dihedral = 25 segment.rotate = False segment.leading_edge_sweep = 45 segment.Airfoil.files = { \"upper\" : \"main_airfoil_upper_2.dat\", \"lower\" : \"main_airfoil_lower_2.dat\" } segment.Airfoil.PARSEC = { \"rle\" : 0.0084, # Main airfoil LE radius \"x_pre\" : 0.458080577545180, # x-location of the crest on the pressure side \"y_pre\" : -0.04553160030118, # y-location of the crest on the pressure side \"d2ydx2_pre\" : 0.554845554794938, # curvature of the crest on the pressure side \"th_pre\" : -9.649803736, # trailing edge angle on the pressure side [deg] \"x_suc\" : 0.46036604, # x-location of the crest on the suction side \"y_suc\" : 0.06302395539, # y-location of the crest on the suction side \"d2ydx2_suc\" : -0.361421420, # curvature of the crest on the suction side \"th_suc\" : -12.391677695858, # trailing edge angle on the suction side [deg] \"yte upper\" : 0.002, \"yte lower\" : -0.002 # trailing edge angle on the suction side [deg] } Geometry_data.Segments.append(segment) # ------------------------------- MESH SETTINGS ---------------------------------------------------------------- # # Mesh_data = Mesh() # Flag to mesh the shape or not Mesh_data.meshing = True # Mesh type Mesh_data.structured = True # Defined the OS in which Pointwise is used # WINDOWS or Linux Mesh_data.operating_system = 'Linux' # Pointwise tclsh directory used in Windows Mesh_data.tclsh_directory = r\"/home/doktorand/Fidelity/Pointwise/Pointwise2022.1\" # Desired Y+ value Mesh_data.Yplus = 30.0 # Define the Glyph template to use for meshing Mesh_data.glyph_file = \"mesh_clean_wing_SU2.glf\" # Mesh filename for either the newly generated mesh or an eisting mesh Mesh_data.filename = 'su2meshEx.su2' Mesh_data.pw_mesh_file = 'mesh_file.pw' Mesh_data.wing_mesh_settings = { \"LE_spacing\" : 0.001, # Airfoil leading edge spacing \"TE_spacing\" : 0.0005, # Airfoil trailing edge spacing \"flap_cluster\" : 0.005, \"connector dimensions\" : [200, 200, 8], # \"connector_dimensions\": [200, 120, 150, 150, 70, 25, 8, 8], \"number of normal cells\" : 230 } # Define far-field # min x, max x # min y, max y # min z, max z (used only for 3D cases) Mesh_data.far_field = [[-60, 60], [-60, 60], [0, 60]] Mesh_data.global_surface_mesh_settings = { \"Min boundary subdivisions\" : 10, \"Max extents subdivisions\" : 300, \"Curvature resolution angle\" : 15, \"Max aspect ratio\" : 100, \"Refinement factor\" : 1.15, \"Boundary gap subdivisions\" : 3 } Mesh_data.trailing_edge_meshing_settings = { \"Trailing edge mapping\" : False, \"Trailing edge cells\" : 10, \"Convex spacing growth rate\" : 0.5, \"Max aspect ratio\" : 100, \"Spacing factor\" : 1 } Mesh_data.boundary_layer_settings = { \"Max layers\" : 50, \"Full layers\" : 1, \"Stop if full layers not met\" : True, \"Allow incomplete layers\" : True, \"Push attributes\" : True, \"Skew criteria equiangle\" : 1, \"Growth rate\" : 1.15, \"Max included angle\" : 170, \"Final cell aspect ratio\" : 1.0, \"Collision buffer\" : 2, \"Centroid skewness\" : 0.8, \"Size field decay\" : 0.75, } # ----------------------------------------------------------------------------------------------------------------------------- # # # Pack all inputs Input = Data() Input.Solver = Solver_settings Input.Freestream = Freestream Input.Geometry = Geometry_data Input.Mesh = Mesh_data return Input if __name__ == '__main__': Input = Input_data_3D_wing() run_aerodynamic_analysis(Input)","title":"Inputs"},{"location":"testcases/Full_3D_Wing/#results","text":"","title":"Results"},{"location":"testcases/LE_TE_flaps/","text":"Airfoil including trailing edge device and leading edge device Clean Airfoil Full test case is the simulation of the air flow through the clean airfoil (without flaps, just airfoil). In this case, PARSEC airfoil parameterized method is used to create the airfoil geometry. Steps: Setting the input for the simulation The geometry is defined using PARSEC In function run_aerodynamic_analysis , Generate the file for geometry and mesh the geometry Solve using SU2 Read results from the runtime log and save them as csv and vtu Visualize the result using Paraview Inputs import os import numpy as np from Core.Data import Data from Components.Solver import Solver from Components.Geometry import Geometry from Components.Geometry.Wing.Segment import Segment from Components.Mesh import Mesh from Run_aerodynamic_analysis import run_aerodynamic_analysis def Input_data(): working_dir = r\"/home/doktorand/Software/PyAeroSweep-Stan-V3/PyAeroSweep/Test_Cases/LE_TE_flaps\" # ------------------------------- SOLVER SETTINGS ----------------------------------------------------------- # # Solver_settings = Solver() Solver_settings.working_dir = working_dir Solver_settings.name = 'SU2' # SU2 or Fluent # Solver dimensions # 2d or 3d for SU2 Solver_settings.dimensions = '2d' # Only available for SU2 in 3D # defines half od the shape or a full shape analysis (Only symmetric works for now) Solver_settings.symmetric = True # SST or SA for SU2 Solver_settings.turbulence_model = 'SST' # Number of processors Solver_settings.processors = 4 # Cauchy convergence criteria # Could be either LIFT or DRAG Solver_settings.monitor = \"LIFT\" Solver_settings.tolerance = 5e-7 Solver_settings.max_iterations = 100 Solver_settings.save_frequency = 100 # Warm start # YES or NO Solver_settings.warmstart = 'YES' # SU2 reference config file name which will be updated Solver_settings.config_file = 'Run_airfoil_template.cfg' # ------------------------------- FREESTREAM SETTINGS ------------------------------------------------------- # # Freestream = Data() Freestream.Mach = np.array([0.21,0.25]) Freestream.Altitude = np.array([0,2000]) # in meters Freestream.Angle_of_attack = np.array([0.0,3.0,5.0]) # in degrees # ------------------------------- GEOMETRY SETTINGS --------------------------------------------------------- # # Geometry_data = Geometry() # Geometry to analyze ''' Could be airfoil or wing Airfoils can be parametrically defined using the PARSEC methods Wings are defined only using the existing CAD file and work either for straight tapered wings with or without the kink''' Geometry_data.type = 'airfoil' # Reference values Geometry_data.reference_values = { \"Area\" : 2.62, \"Length\" : 2.62, \"Depth\" : 1, \"Point\" : [0.25*2.62,0,0] # reference point about which the moment is taken } segment = Segment() segment.tag = 'section_1' segment.spanwise_location = 0 segment.chord = 2.62 segment.Airfoil.files = { \"upper\" : \"main_airfoil_upper_1.dat\", \"lower\" : \"main_airfoil_lower_1.dat\" } segment.Airfoil.PARSEC = { \"rle\" : 0.0084, # Main airfoil LE radius \"x_pre\" : 0.458080577545180, # x-location of the crest on the pressure side \"y_pre\" : -0.04553160030118, # y-location of the crest on the pressure side \"d2ydx2_pre\" : 0.554845554794938, # curvature of the crest on the pressure side \"th_pre\" : -9.649803736, # trailing edge angle on the pressure side [deg] \"x_suc\" : 0.46036604, # x-location of the crest on the suction side \"y_suc\" : 0.06302395539, # y-location of the crest on the suction side \"d2ydx2_suc\" : -0.361421420, # curvature of the crest on the suction side \"th_suc\" : -12.391677695858, # trailing edge angle on the suction side [deg] \"yte upper\" : 0.002, \"yte lower\" : -0.002 } segment.TrailingEdgeDevice.type = 'Plain' segment.TrailingEdgeDevice.PARSEC = { \"delta_f\" : 25, # flap deflection [deg] \"cf_c\" : 0.7, # flap chord ratio \"d_cf_up\" : 0.03, # flap offset from the hinge on the upper surface \"d_cf_low\" : 0.03, # shroud lip extent ratio wrt the flap \"w_con_seal\" : 0.5 # conical parameter for the flap seal } segment.LeadingEdgeDevice.type = 'Droop' segment.LeadingEdgeDevice.PARSEC = { \"delta_s\" : 25, # droop nose deflection [deg] \"cs_c\" : 0.15, # droop nose chord ratio \"d_cs_up\" : 0.03, # droop nose offset from the hinge on the upper surface \"d_cs_low\" : 0.03, # shroud lip extent ratio wrt the flap \"w_con_seal\" : 1.0 # conical parameter for the droop nose seal } segment.plot_airfoil = True Geometry_data.Segments.append(segment) # ------------------------------- MESH SETTINGS ---------------------------------------------------------------- # # Mesh_data = Mesh() # Flag to mesh the shape or not Mesh_data.meshing = True # Mesh type Mesh_data.structured = True # Defined the OS in which Pointwise is used # WINDOWS or Linux Mesh_data.operating_system = 'Linux' # Pointwise tclsh directory used in Windows Mesh_data.tclsh_directory = r\"/home/doktorand/Fidelity/Pointwise/Pointwise2022.1\" # Desired Y+ value Mesh_data.Yplus = 1.0 # Define the Glyph template to use for meshing Mesh_data.glyph_file = \"mesh_clean_airfoil_SU2.glf\" # Mesh filename for either the newly generated mesh or an eisting mesh Mesh_data.filename = 'su2meshEx.su2' # Define far-field Mesh_data.far_field = 100 * Geometry_data.reference_values[\"Length\"] Mesh_data.airfoil_mesh_settings = { \"LE_spacing\" : 0.001, # Airfoil leading edge spacing \"TE_spacing\" : 0.0005, # Airfoil trailing edge spacing \"flap_cluster\" : 0.005, \"connector dimensions\" : [200, 200, 8], # \"connector_dimensions\": [200, 120, 150, 150, 70, 25, 8, 8], \"number of normal cells\" : 230 } # ----------------------------------------------------------------------------------------------------------------------------- # # # Pack all inputs Input = Data() Input.Solver = Solver_settings Input.Freestream = Freestream Input.Geometry = Geometry_data Input.Mesh = Mesh_data return Input if __name__ == '__main__': Input = Input_data() run_aerodynamic_analysis(Input) Result The magnitude of momentum at altitude 2000 m, speed = 0.25 Mach and angle of attack 3 degree.","title":"LE_TE"},{"location":"testcases/LE_TE_flaps/#airfoil-including-trailing-edge-device-and-leading-edge-device","text":"Clean Airfoil Full test case is the simulation of the air flow through the clean airfoil (without flaps, just airfoil). In this case, PARSEC airfoil parameterized method is used to create the airfoil geometry. Steps: Setting the input for the simulation The geometry is defined using PARSEC In function run_aerodynamic_analysis , Generate the file for geometry and mesh the geometry Solve using SU2 Read results from the runtime log and save them as csv and vtu Visualize the result using Paraview","title":"Airfoil including trailing edge device and leading edge device"},{"location":"testcases/LE_TE_flaps/#inputs","text":"import os import numpy as np from Core.Data import Data from Components.Solver import Solver from Components.Geometry import Geometry from Components.Geometry.Wing.Segment import Segment from Components.Mesh import Mesh from Run_aerodynamic_analysis import run_aerodynamic_analysis def Input_data(): working_dir = r\"/home/doktorand/Software/PyAeroSweep-Stan-V3/PyAeroSweep/Test_Cases/LE_TE_flaps\" # ------------------------------- SOLVER SETTINGS ----------------------------------------------------------- # # Solver_settings = Solver() Solver_settings.working_dir = working_dir Solver_settings.name = 'SU2' # SU2 or Fluent # Solver dimensions # 2d or 3d for SU2 Solver_settings.dimensions = '2d' # Only available for SU2 in 3D # defines half od the shape or a full shape analysis (Only symmetric works for now) Solver_settings.symmetric = True # SST or SA for SU2 Solver_settings.turbulence_model = 'SST' # Number of processors Solver_settings.processors = 4 # Cauchy convergence criteria # Could be either LIFT or DRAG Solver_settings.monitor = \"LIFT\" Solver_settings.tolerance = 5e-7 Solver_settings.max_iterations = 100 Solver_settings.save_frequency = 100 # Warm start # YES or NO Solver_settings.warmstart = 'YES' # SU2 reference config file name which will be updated Solver_settings.config_file = 'Run_airfoil_template.cfg' # ------------------------------- FREESTREAM SETTINGS ------------------------------------------------------- # # Freestream = Data() Freestream.Mach = np.array([0.21,0.25]) Freestream.Altitude = np.array([0,2000]) # in meters Freestream.Angle_of_attack = np.array([0.0,3.0,5.0]) # in degrees # ------------------------------- GEOMETRY SETTINGS --------------------------------------------------------- # # Geometry_data = Geometry() # Geometry to analyze ''' Could be airfoil or wing Airfoils can be parametrically defined using the PARSEC methods Wings are defined only using the existing CAD file and work either for straight tapered wings with or without the kink''' Geometry_data.type = 'airfoil' # Reference values Geometry_data.reference_values = { \"Area\" : 2.62, \"Length\" : 2.62, \"Depth\" : 1, \"Point\" : [0.25*2.62,0,0] # reference point about which the moment is taken } segment = Segment() segment.tag = 'section_1' segment.spanwise_location = 0 segment.chord = 2.62 segment.Airfoil.files = { \"upper\" : \"main_airfoil_upper_1.dat\", \"lower\" : \"main_airfoil_lower_1.dat\" } segment.Airfoil.PARSEC = { \"rle\" : 0.0084, # Main airfoil LE radius \"x_pre\" : 0.458080577545180, # x-location of the crest on the pressure side \"y_pre\" : -0.04553160030118, # y-location of the crest on the pressure side \"d2ydx2_pre\" : 0.554845554794938, # curvature of the crest on the pressure side \"th_pre\" : -9.649803736, # trailing edge angle on the pressure side [deg] \"x_suc\" : 0.46036604, # x-location of the crest on the suction side \"y_suc\" : 0.06302395539, # y-location of the crest on the suction side \"d2ydx2_suc\" : -0.361421420, # curvature of the crest on the suction side \"th_suc\" : -12.391677695858, # trailing edge angle on the suction side [deg] \"yte upper\" : 0.002, \"yte lower\" : -0.002 } segment.TrailingEdgeDevice.type = 'Plain' segment.TrailingEdgeDevice.PARSEC = { \"delta_f\" : 25, # flap deflection [deg] \"cf_c\" : 0.7, # flap chord ratio \"d_cf_up\" : 0.03, # flap offset from the hinge on the upper surface \"d_cf_low\" : 0.03, # shroud lip extent ratio wrt the flap \"w_con_seal\" : 0.5 # conical parameter for the flap seal } segment.LeadingEdgeDevice.type = 'Droop' segment.LeadingEdgeDevice.PARSEC = { \"delta_s\" : 25, # droop nose deflection [deg] \"cs_c\" : 0.15, # droop nose chord ratio \"d_cs_up\" : 0.03, # droop nose offset from the hinge on the upper surface \"d_cs_low\" : 0.03, # shroud lip extent ratio wrt the flap \"w_con_seal\" : 1.0 # conical parameter for the droop nose seal } segment.plot_airfoil = True Geometry_data.Segments.append(segment) # ------------------------------- MESH SETTINGS ---------------------------------------------------------------- # # Mesh_data = Mesh() # Flag to mesh the shape or not Mesh_data.meshing = True # Mesh type Mesh_data.structured = True # Defined the OS in which Pointwise is used # WINDOWS or Linux Mesh_data.operating_system = 'Linux' # Pointwise tclsh directory used in Windows Mesh_data.tclsh_directory = r\"/home/doktorand/Fidelity/Pointwise/Pointwise2022.1\" # Desired Y+ value Mesh_data.Yplus = 1.0 # Define the Glyph template to use for meshing Mesh_data.glyph_file = \"mesh_clean_airfoil_SU2.glf\" # Mesh filename for either the newly generated mesh or an eisting mesh Mesh_data.filename = 'su2meshEx.su2' # Define far-field Mesh_data.far_field = 100 * Geometry_data.reference_values[\"Length\"] Mesh_data.airfoil_mesh_settings = { \"LE_spacing\" : 0.001, # Airfoil leading edge spacing \"TE_spacing\" : 0.0005, # Airfoil trailing edge spacing \"flap_cluster\" : 0.005, \"connector dimensions\" : [200, 200, 8], # \"connector_dimensions\": [200, 120, 150, 150, 70, 25, 8, 8], \"number of normal cells\" : 230 } # ----------------------------------------------------------------------------------------------------------------------------- # # # Pack all inputs Input = Data() Input.Solver = Solver_settings Input.Freestream = Freestream Input.Geometry = Geometry_data Input.Mesh = Mesh_data return Input if __name__ == '__main__': Input = Input_data() run_aerodynamic_analysis(Input)","title":"Inputs"},{"location":"testcases/LE_TE_flaps/#result","text":"The magnitude of momentum at altitude 2000 m, speed = 0.25 Mach and angle of attack 3 degree.","title":"Result"},{"location":"testcases/Mesh_and_Run/","text":"Mesh and run In the case mesh and run, we use the existing geometry and then we mesh it and run the solver. Therefore, the folder Geometry_files containing the airfoil geometry file .dat is necessary to run this case. Steps: Setting the input for the simulation Using existing geometry In function run_aerodynamic_analysis , Mesh the geometry Solve using SU2 Read results from the runtime log and save them as csv and vtu Visualize the result using Paraview Inputs import numpy as np from Core.Data import Data from Components.Solver import Solver from Components.Geometry import Geometry from Components.Geometry.Wing.Segment import Segment from Components.Mesh import Mesh from Run_aerodynamic_analysis import run_aerodynamic_analysis def Input_data(): working_dir = r\"/home/doktorand/Software/PyAeroSweep-Stan-V3/PyAeroSweep/Test_Cases/Mesh_and_Run\" # ------------------------------- SOLVER SETTINGS ----------------------------------------------------------- # # Solver_settings = Solver() Solver_settings.working_dir = working_dir Solver_settings.name = 'SU2' # SU2 or Fluent # Solver dimensions # 2d or 3d for SU2 Solver_settings.dimensions = '2d' # Only available for SU2 in 3D # defines half od the shape or a full shape analysis (Only symmetric works for now) Solver_settings.symmetric = True # SST or SA for SU2 Solver_settings.turbulence_model = 'SST' # Number of processors Solver_settings.processors = 7 # Cauchy convergence criteria # Could be either LIFT or DRAG Solver_settings.monitor = \"LIFT\" Solver_settings.tolerance = 5e-7 Solver_settings.max_iterations = 100 Solver_settings.save_frequency = 100 # Warm start # YES or NO Solver_settings.warmstart = 'YES' # SU2 reference config file name which will be updated Solver_settings.config_file = 'Run_airfoil_template.cfg' # ------------------------------- FREESTREAM SETTINGS ------------------------------------------------------- # # Freestream = Data() Freestream.Mach = np.array([0.21,0.25]) Freestream.Altitude = np.array([0,2000]) # in meters Freestream.Angle_of_attack = np.array([0.0,3.0,5.0]) # in degrees # ------------------------------- GEOMETRY SETTINGS --------------------------------------------------------- # # Geometry_data = Geometry() # Geometry to analyze ''' Could be airfoil or wing Airfoils can be parametrically defined using the PARSEC methods Wings are defined only using the existing CAD file and work either for straight tapered wings with or without the kink''' Geometry_data.type = 'airfoil' # Reference values Geometry_data.reference_values = { \"Area\" : 2.62, \"Length\" : 2.62, \"Depth\" : 1, \"Point\" : [0.25*2.62,0,0] # reference point about which the moment is taken } # Flag to use PARSEC parametrization or to use already existing airfoils Geometry_data.generate = False segment = Segment() segment.tag = 'section_1' segment.chord = 2.62 segment.Airfoil.files = { \"upper\" : \"main_airfoil_upper_fixed.dat\", \"lower\" : \"main_airfoil_lower_fixed.dat\" } segment.TrailingEdgeDevice.type = 'Slotted' segment.TrailingEdgeDevice.files = { \"upper surface file\" : \"flap_airfoil_upper_fixed.dat\", \"lower surface file\" : \"flap_airfoil_lower_fixed.dat\", \"flap cutout\" : [\"main_airfoil_cut1_fixed.dat\", \"main_airfoil_cut2_fixed.dat\"] } segment.plot_airfoil = True Geometry_data.Segments.append(segment) # ------------------------------- MESH SETTINGS ---------------------------------------------------------------- # # Mesh_data = Mesh() # Flag to mesh the shape or not Mesh_data.meshing = True # Mesh type Mesh_data.structured = False # Defined the OS in which Pointwise is used # WINDOWS or Linux Mesh_data.operating_system = 'Linux' # Pointwise tclsh directory used in Windows Mesh_data.tclsh_directory = r\"/home/doktorand/Fidelity/Pointwise/Pointwise2022.1\" # Desired Y+ value Mesh_data.Yplus = 1.0 # Define the Glyph template to use for meshing Mesh_data.glyph_file = \"mesh_flapped_airfoil_SU2.glf\" # Mesh filename for either the newly generated mesh or an eisting mesh Mesh_data.filename = 'su2meshEx.su2' # Define far-field # min x, max x # min y, max y # min z, max z (used only for 3D cases) Mesh_data.far_field = [[-60, 60], [-60 ,60]] Mesh_data.airfoil_mesh_settings = { \"LE_spacing\" : 0.001, # Airfoil leading edge spacing \"TE_spacing\" : 0.0005, # Airfoil trailing edge spacing \"LE_flap_spacing\" : 0.001, \"TE_flap_spacing\" : 0.0005, \"flap_cut_cluster\" : 0.005, # Cluster at the flap cutout corner \"connector dimensions\" : [200, 120, 150, 150, 70, 25, 8, 8], # \"near-field refinement radius 1\" : 9, \"near-field refinement radius 2\" : 45, \"near-field nodes\" : 100, \"far-field connectors\" : 20, \"Max TREX layers\" : 100, \"near-field boundary decay 0\" : 0.85, \"Full TREX layers\" : 60, \"TREX growth rate\" : 1.1, \"near-field boundary decay 2\" : 0.75, \"near-field boundary decay 1\" : 0.85 } # ----------------------------------------------------------------------------------------------------------------------------- # # # Pack all inputs Input = Data() Input.Solver = Solver_settings Input.Freestream = Freestream Input.Geometry = Geometry_data Input.Mesh = Mesh_data return Input if __name__ == '__main__': Input = Input_data() run_aerodynamic_analysis(Input) Result The magnitude of momentum at altitude 2000 m, speed = 0.25 Mach and angle of attack 3 degree.","title":"Mesh and run"},{"location":"testcases/Mesh_and_Run/#mesh-and-run","text":"In the case mesh and run, we use the existing geometry and then we mesh it and run the solver. Therefore, the folder Geometry_files containing the airfoil geometry file .dat is necessary to run this case. Steps: Setting the input for the simulation Using existing geometry In function run_aerodynamic_analysis , Mesh the geometry Solve using SU2 Read results from the runtime log and save them as csv and vtu Visualize the result using Paraview","title":"Mesh and run"},{"location":"testcases/Mesh_and_Run/#inputs","text":"import numpy as np from Core.Data import Data from Components.Solver import Solver from Components.Geometry import Geometry from Components.Geometry.Wing.Segment import Segment from Components.Mesh import Mesh from Run_aerodynamic_analysis import run_aerodynamic_analysis def Input_data(): working_dir = r\"/home/doktorand/Software/PyAeroSweep-Stan-V3/PyAeroSweep/Test_Cases/Mesh_and_Run\" # ------------------------------- SOLVER SETTINGS ----------------------------------------------------------- # # Solver_settings = Solver() Solver_settings.working_dir = working_dir Solver_settings.name = 'SU2' # SU2 or Fluent # Solver dimensions # 2d or 3d for SU2 Solver_settings.dimensions = '2d' # Only available for SU2 in 3D # defines half od the shape or a full shape analysis (Only symmetric works for now) Solver_settings.symmetric = True # SST or SA for SU2 Solver_settings.turbulence_model = 'SST' # Number of processors Solver_settings.processors = 7 # Cauchy convergence criteria # Could be either LIFT or DRAG Solver_settings.monitor = \"LIFT\" Solver_settings.tolerance = 5e-7 Solver_settings.max_iterations = 100 Solver_settings.save_frequency = 100 # Warm start # YES or NO Solver_settings.warmstart = 'YES' # SU2 reference config file name which will be updated Solver_settings.config_file = 'Run_airfoil_template.cfg' # ------------------------------- FREESTREAM SETTINGS ------------------------------------------------------- # # Freestream = Data() Freestream.Mach = np.array([0.21,0.25]) Freestream.Altitude = np.array([0,2000]) # in meters Freestream.Angle_of_attack = np.array([0.0,3.0,5.0]) # in degrees # ------------------------------- GEOMETRY SETTINGS --------------------------------------------------------- # # Geometry_data = Geometry() # Geometry to analyze ''' Could be airfoil or wing Airfoils can be parametrically defined using the PARSEC methods Wings are defined only using the existing CAD file and work either for straight tapered wings with or without the kink''' Geometry_data.type = 'airfoil' # Reference values Geometry_data.reference_values = { \"Area\" : 2.62, \"Length\" : 2.62, \"Depth\" : 1, \"Point\" : [0.25*2.62,0,0] # reference point about which the moment is taken } # Flag to use PARSEC parametrization or to use already existing airfoils Geometry_data.generate = False segment = Segment() segment.tag = 'section_1' segment.chord = 2.62 segment.Airfoil.files = { \"upper\" : \"main_airfoil_upper_fixed.dat\", \"lower\" : \"main_airfoil_lower_fixed.dat\" } segment.TrailingEdgeDevice.type = 'Slotted' segment.TrailingEdgeDevice.files = { \"upper surface file\" : \"flap_airfoil_upper_fixed.dat\", \"lower surface file\" : \"flap_airfoil_lower_fixed.dat\", \"flap cutout\" : [\"main_airfoil_cut1_fixed.dat\", \"main_airfoil_cut2_fixed.dat\"] } segment.plot_airfoil = True Geometry_data.Segments.append(segment) # ------------------------------- MESH SETTINGS ---------------------------------------------------------------- # # Mesh_data = Mesh() # Flag to mesh the shape or not Mesh_data.meshing = True # Mesh type Mesh_data.structured = False # Defined the OS in which Pointwise is used # WINDOWS or Linux Mesh_data.operating_system = 'Linux' # Pointwise tclsh directory used in Windows Mesh_data.tclsh_directory = r\"/home/doktorand/Fidelity/Pointwise/Pointwise2022.1\" # Desired Y+ value Mesh_data.Yplus = 1.0 # Define the Glyph template to use for meshing Mesh_data.glyph_file = \"mesh_flapped_airfoil_SU2.glf\" # Mesh filename for either the newly generated mesh or an eisting mesh Mesh_data.filename = 'su2meshEx.su2' # Define far-field # min x, max x # min y, max y # min z, max z (used only for 3D cases) Mesh_data.far_field = [[-60, 60], [-60 ,60]] Mesh_data.airfoil_mesh_settings = { \"LE_spacing\" : 0.001, # Airfoil leading edge spacing \"TE_spacing\" : 0.0005, # Airfoil trailing edge spacing \"LE_flap_spacing\" : 0.001, \"TE_flap_spacing\" : 0.0005, \"flap_cut_cluster\" : 0.005, # Cluster at the flap cutout corner \"connector dimensions\" : [200, 120, 150, 150, 70, 25, 8, 8], # \"near-field refinement radius 1\" : 9, \"near-field refinement radius 2\" : 45, \"near-field nodes\" : 100, \"far-field connectors\" : 20, \"Max TREX layers\" : 100, \"near-field boundary decay 0\" : 0.85, \"Full TREX layers\" : 60, \"TREX growth rate\" : 1.1, \"near-field boundary decay 2\" : 0.75, \"near-field boundary decay 1\" : 0.85 } # ----------------------------------------------------------------------------------------------------------------------------- # # # Pack all inputs Input = Data() Input.Solver = Solver_settings Input.Freestream = Freestream Input.Geometry = Geometry_data Input.Mesh = Mesh_data return Input if __name__ == '__main__': Input = Input_data() run_aerodynamic_analysis(Input)","title":"Inputs"},{"location":"testcases/Mesh_and_Run/#result","text":"The magnitude of momentum at altitude 2000 m, speed = 0.25 Mach and angle of attack 3 degree.","title":"Result"},{"location":"testcases/Only_RANS/","text":"Only RANS (only solve) In the case mesh and run, we already have the existing geometry and its mesh, then we only start from the solving part. Therefore, the mesh file (.su2) is neccessary to run the case. Steps: Setting the input for the simulation Using existing geometry and mesh In function run_aerodynamic_analysis , Solve using SU2 Read results from the runtime log and save them as csv and vtu Visualize the result using Paraview Inputs import numpy as np from Core.Data import Data from Components.Solver import Solver from Components.Geometry import Geometry from Components.Geometry.Wing.Segment import Segment from Components.Mesh import Mesh from Run_aerodynamic_analysis import run_aerodynamic_analysis def Input_data(): working_dir = r\"/home/doktorand/Software/PyAeroSweep-Stan-V3/PyAeroSweep/Test_Cases/Only_RANS\" # ------------------------------- SOLVER SETTINGS ----------------------------------------------------------- # # Solver_settings = Solver() Solver_settings.working_dir = working_dir Solver_settings.name = 'SU2' # SU2 or Fluent # Solver dimensions # 2d or 3d for SU2 Solver_settings.dimensions = '2d' # Only available for SU2 in 3D # defines half od the shape or a full shape analysis (Only symmetric works for now) Solver_settings.symmetric = True # SST or SA for SU2 Solver_settings.turbulence_model = 'SST' # Number of processors Solver_settings.processors = 7 # Cauchy convergence criteria # Could be either LIFT or DRAG Solver_settings.monitor = \"LIFT\" Solver_settings.tolerance = 5e-7 Solver_settings.max_iterations = 100 Solver_settings.save_frequency = 100 # Warm start # YES or NO Solver_settings.warmstart = 'YES' # SU2 reference config file name which will be updated Solver_settings.config_file = 'Run_airfoil_template.cfg' # ------------------------------- FREESTREAM SETTINGS ------------------------------------------------------- # # Freestream = Data() Freestream.Mach = np.array([0.21,0.25]) Freestream.Altitude = np.array([0,2000]) # in meters Freestream.Angle_of_attack = np.array([0.0,3.0,5.0]) # in degrees # ------------------------------- GEOMETRY SETTINGS --------------------------------------------------------- # # Geometry_data = Geometry() # Geometry to analyze ''' Could be airfoil or wing Airfoils can be parametrically defined using the PARSEC methods Wings are defined only using the existing CAD file and work either for straight tapered wings with or without the kink''' Geometry_data.type = 'airfoil' # Reference values Geometry_data.reference_values = { \"Area\" : 2.62, \"Length\" : 2.62, \"Depth\" : 1, \"Point\" : [0.25*2.62,0,0] # reference point about which the moment is taken } # Flag to use PARSEC parametrization or to use already existing airfoils Geometry_data.generate = False # ------------------------------- MESH SETTINGS ---------------------------------------------------------------- # # Mesh_data = Mesh() # Flag to mesh the shape or not Mesh.meshing = False # Defined the OS in which Pointwise is used # WINDOWS or Linux Mesh.operating_system = 'Linux' # Mesh filename for either the newly generated mesh or an eisting mesh Mesh.filename = 'su2meshE_existing.su2' # ----------------------------------------------------------------------------------------------------------------------------- # # # Pack all inputs Input = Data() Input.Solver = Solver_settings Input.Freestream = Freestream Input.Geometry = Geometry_data Input.Mesh = Mesh_data return Input if __name__ == '__main__': Input = Input_data() run_aerodynamic_analysis(Input) Result The magnitude of momentum at altitude 2000 m, speed = 0.25 Mach and angle of attack 3 degree.","title":"Only RANS (solver)"},{"location":"testcases/Only_RANS/#only-rans-only-solve","text":"In the case mesh and run, we already have the existing geometry and its mesh, then we only start from the solving part. Therefore, the mesh file (.su2) is neccessary to run the case. Steps: Setting the input for the simulation Using existing geometry and mesh In function run_aerodynamic_analysis , Solve using SU2 Read results from the runtime log and save them as csv and vtu Visualize the result using Paraview","title":"Only RANS (only solve)"},{"location":"testcases/Only_RANS/#inputs","text":"import numpy as np from Core.Data import Data from Components.Solver import Solver from Components.Geometry import Geometry from Components.Geometry.Wing.Segment import Segment from Components.Mesh import Mesh from Run_aerodynamic_analysis import run_aerodynamic_analysis def Input_data(): working_dir = r\"/home/doktorand/Software/PyAeroSweep-Stan-V3/PyAeroSweep/Test_Cases/Only_RANS\" # ------------------------------- SOLVER SETTINGS ----------------------------------------------------------- # # Solver_settings = Solver() Solver_settings.working_dir = working_dir Solver_settings.name = 'SU2' # SU2 or Fluent # Solver dimensions # 2d or 3d for SU2 Solver_settings.dimensions = '2d' # Only available for SU2 in 3D # defines half od the shape or a full shape analysis (Only symmetric works for now) Solver_settings.symmetric = True # SST or SA for SU2 Solver_settings.turbulence_model = 'SST' # Number of processors Solver_settings.processors = 7 # Cauchy convergence criteria # Could be either LIFT or DRAG Solver_settings.monitor = \"LIFT\" Solver_settings.tolerance = 5e-7 Solver_settings.max_iterations = 100 Solver_settings.save_frequency = 100 # Warm start # YES or NO Solver_settings.warmstart = 'YES' # SU2 reference config file name which will be updated Solver_settings.config_file = 'Run_airfoil_template.cfg' # ------------------------------- FREESTREAM SETTINGS ------------------------------------------------------- # # Freestream = Data() Freestream.Mach = np.array([0.21,0.25]) Freestream.Altitude = np.array([0,2000]) # in meters Freestream.Angle_of_attack = np.array([0.0,3.0,5.0]) # in degrees # ------------------------------- GEOMETRY SETTINGS --------------------------------------------------------- # # Geometry_data = Geometry() # Geometry to analyze ''' Could be airfoil or wing Airfoils can be parametrically defined using the PARSEC methods Wings are defined only using the existing CAD file and work either for straight tapered wings with or without the kink''' Geometry_data.type = 'airfoil' # Reference values Geometry_data.reference_values = { \"Area\" : 2.62, \"Length\" : 2.62, \"Depth\" : 1, \"Point\" : [0.25*2.62,0,0] # reference point about which the moment is taken } # Flag to use PARSEC parametrization or to use already existing airfoils Geometry_data.generate = False # ------------------------------- MESH SETTINGS ---------------------------------------------------------------- # # Mesh_data = Mesh() # Flag to mesh the shape or not Mesh.meshing = False # Defined the OS in which Pointwise is used # WINDOWS or Linux Mesh.operating_system = 'Linux' # Mesh filename for either the newly generated mesh or an eisting mesh Mesh.filename = 'su2meshE_existing.su2' # ----------------------------------------------------------------------------------------------------------------------------- # # # Pack all inputs Input = Data() Input.Solver = Solver_settings Input.Freestream = Freestream Input.Geometry = Geometry_data Input.Mesh = Mesh_data return Input if __name__ == '__main__': Input = Input_data() run_aerodynamic_analysis(Input)","title":"Inputs"},{"location":"testcases/Only_RANS/#result","text":"The magnitude of momentum at altitude 2000 m, speed = 0.25 Mach and angle of attack 3 degree.","title":"Result"}]}